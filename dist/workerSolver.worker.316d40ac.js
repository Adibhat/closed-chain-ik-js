parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"PxDr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=e,exports.toRadian=s,exports.equals=n,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var t=1e-6;exports.EPSILON=t;var r="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=r;var a=Math.random;function e(t){exports.ARRAY_TYPE=r=t}exports.RANDOM=a;var o=Math.PI/180;function s(t){return t*o}function n(r,a){return Math.abs(r-a)<=t*Math.max(1,Math.abs(r),Math.abs(a))}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});
},{}],"hSOw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.copy=a,exports.identity=u,exports.fromValues=s,exports.set=i,exports.transpose=c,exports.invert=p,exports.adjoint=f,exports.determinant=x,exports.multiply=l,exports.rotate=M,exports.scale=h,exports.fromRotation=b,exports.fromScaling=v,exports.str=y,exports.frob=d,exports.LDU=m,exports.add=P,exports.subtract=O,exports.exactEquals=A,exports.equals=j,exports.multiplyScalar=E,exports.multiplyScalarAndAdd=R,exports.sub=exports.mul=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function i(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function c(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function p(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*a-o*n;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-o*u,t[3]=e*u,t):null}function f(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t}function x(t){return t[0]*t[3]-t[2]*t[1]}function l(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return t[0]=n*s+a*i,t[1]=o*s+u*i,t[2]=n*c+a*p,t[3]=o*c+u*p,t}function M(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=Math.sin(e),i=Math.cos(e);return t[0]=n*i+a*s,t[1]=o*i+u*s,t[2]=n*-s+a*i,t[3]=o*-s+u*i,t}function h(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1];return t[0]=n*s,t[1]=o*s,t[2]=a*i,t[3]=u*i,t}function b(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t}function v(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function y(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function d(t){return Math.hypot(t[0],t[1],t[2],t[3])}function m(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function O(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function A(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function j(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}function E(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function R(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}var Y=l;exports.mul=Y;var _=O;exports.sub=_;
},{"./common.js":"PxDr"}],"n7Ma":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=a,exports.copy=o,exports.identity=u,exports.fromValues=s,exports.set=i,exports.invert=c,exports.determinant=p,exports.multiply=f,exports.rotate=x,exports.scale=l,exports.translate=M,exports.fromRotation=h,exports.fromScaling=b,exports.fromTranslation=v,exports.str=m,exports.frob=y,exports.add=d,exports.subtract=P,exports.multiplyScalar=O,exports.multiplyScalarAndAdd=A,exports.exactEquals=E,exports.equals=R,exports.sub=exports.mul=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(6);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function a(r){var e=new t.ARRAY_TYPE(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(r,e,n,a,o,u){var s=new t.ARRAY_TYPE(6);return s[0]=r,s[1]=e,s[2]=n,s[3]=a,s[4]=o,s[5]=u,s}function i(t,r,e,n,a,o,u){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=u,t}function c(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],u=r[4],s=r[5],i=e*o-n*a;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-a*i,t[3]=e*i,t[4]=(a*s-o*u)*i,t[5]=(n*u-e*s)*i,t):null}function p(t){return t[0]*t[3]-t[1]*t[2]}function f(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1],f=e[2],x=e[3],l=e[4],M=e[5];return t[0]=n*c+o*p,t[1]=a*c+u*p,t[2]=n*f+o*x,t[3]=a*f+u*x,t[4]=n*l+o*M+s,t[5]=a*l+u*M+i,t}function x(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=Math.sin(e),p=Math.cos(e);return t[0]=n*p+o*c,t[1]=a*p+u*c,t[2]=n*-c+o*p,t[3]=a*-c+u*p,t[4]=s,t[5]=i,t}function l(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1];return t[0]=n*c,t[1]=a*c,t[2]=o*p,t[3]=u*p,t[4]=s,t[5]=i,t}function M(t,r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=u,t[4]=n*c+o*p+s,t[5]=a*c+u*p+i,t}function h(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t[4]=0,t[5]=0,t}function b(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function m(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function d(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t}function P(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}function O(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t}function A(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t}function E(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function R(r,e){var n=r[0],a=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=e[0],p=e[1],f=e[2],x=e[3],l=e[4],M=e[5];return Math.abs(n-c)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-f)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(u-x)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-M)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))}var S=f;exports.mul=S;var j=P;exports.sub=j;
},{"./common.js":"PxDr"}],"SRDq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=e,exports.clone=o,exports.copy=u,exports.fromValues=s,exports.set=i,exports.identity=c,exports.transpose=f,exports.invert=p,exports.adjoint=M,exports.determinant=x,exports.multiply=h,exports.translate=b,exports.rotate=l,exports.scale=m,exports.fromTranslation=v,exports.fromRotation=P,exports.fromScaling=O,exports.fromMat2d=d,exports.fromQuat=y,exports.normalFromMat4=E,exports.projection=S,exports.str=A,exports.frob=j,exports.add=I,exports.subtract=L,exports.multiplyScalar=N,exports.multiplyScalarAndAdd=R,exports.exactEquals=Y,exports.equals=_,exports.sub=exports.mul=void 0;var t=n(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=r();if(n&&n.has(t))return n.get(t);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=e?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(a,o,u):a[o]=t[o]}return a.default=t,n&&n.set(t,a),a}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function e(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function o(r){var n=new t.ARRAY_TYPE(9);return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,n,a,e,o,u,s,i,c){var f=new t.ARRAY_TYPE(9);return f[0]=r,f[1]=n,f[2]=a,f[3]=e,f[4]=o,f[5]=u,f[6]=s,f[7]=i,f[8]=c,f}function i(t,r,n,a,e,o,u,s,i,c){return t[0]=r,t[1]=n,t[2]=a,t[3]=e,t[4]=o,t[5]=u,t[6]=s,t[7]=i,t[8]=c,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function f(t,r){if(t===r){var n=r[1],a=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=n,t[5]=r[7],t[6]=a,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function p(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=f*u-s*c,M=-f*o+s*i,x=c*o-u*i,h=n*p+a*M+e*x;return h?(h=1/h,t[0]=p*h,t[1]=(-f*a+e*c)*h,t[2]=(s*a-e*u)*h,t[3]=M*h,t[4]=(f*n-e*i)*h,t[5]=(-s*n+e*o)*h,t[6]=x*h,t[7]=(-c*n+a*i)*h,t[8]=(u*n-a*o)*h,t):null}function M(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8];return t[0]=u*f-s*c,t[1]=e*c-a*f,t[2]=a*s-e*u,t[3]=s*i-o*f,t[4]=n*f-e*i,t[5]=e*o-n*s,t[6]=o*c-u*i,t[7]=a*i-n*c,t[8]=n*u-a*o,t}function x(t){var r=t[0],n=t[1],a=t[2],e=t[3],o=t[4],u=t[5],s=t[6],i=t[7],c=t[8];return r*(c*o-u*i)+n*(-c*e+u*s)+a*(i*e-o*s)}function h(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return t[0]=M*a+x*u+h*c,t[1]=M*e+x*s+h*f,t[2]=M*o+x*i+h*p,t[3]=b*a+l*u+m*c,t[4]=b*e+l*s+m*f,t[5]=b*o+l*i+m*p,t[6]=v*a+P*u+O*c,t[7]=v*e+P*s+O*f,t[8]=v*o+P*i+O*p,t}function b(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1];return t[0]=a,t[1]=e,t[2]=o,t[3]=u,t[4]=s,t[5]=i,t[6]=M*a+x*u+c,t[7]=M*e+x*s+f,t[8]=M*o+x*i+p,t}function l(t,r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=Math.sin(n),x=Math.cos(n);return t[0]=x*a+M*u,t[1]=x*e+M*s,t[2]=x*o+M*i,t[3]=x*u-M*a,t[4]=x*s-M*e,t[5]=x*i-M*o,t[6]=c,t[7]=f,t[8]=p,t}function m(t,r,n){var a=n[0],e=n[1];return t[0]=a*r[0],t[1]=a*r[1],t[2]=a*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function v(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function P(t,r){var n=Math.sin(r),a=Math.cos(r);return t[0]=a,t[1]=n,t[2]=0,t[3]=-n,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function y(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=n+n,s=a+a,i=e+e,c=n*u,f=a*u,p=a*s,M=e*u,x=e*s,h=e*i,b=o*u,l=o*s,m=o*i;return t[0]=1-p-h,t[3]=f-m,t[6]=M+l,t[1]=f+m,t[4]=1-c-h,t[7]=x-b,t[2]=M-l,t[5]=x+b,t[8]=1-c-p,t}function E(t,r){var n=r[0],a=r[1],e=r[2],o=r[3],u=r[4],s=r[5],i=r[6],c=r[7],f=r[8],p=r[9],M=r[10],x=r[11],h=r[12],b=r[13],l=r[14],m=r[15],v=n*s-a*u,P=n*i-e*u,O=n*c-o*u,d=a*i-e*s,y=a*c-o*s,E=e*c-o*i,S=f*b-p*h,A=f*l-M*h,j=f*m-x*h,I=p*l-M*b,L=p*m-x*b,N=M*m-x*l,R=v*N-P*L+O*I+d*j-y*A+E*S;return R?(R=1/R,t[0]=(s*N-i*L+c*I)*R,t[1]=(i*j-u*N-c*A)*R,t[2]=(u*L-s*j+c*S)*R,t[3]=(e*L-a*N-o*I)*R,t[4]=(n*N-e*j+o*A)*R,t[5]=(a*j-n*L-o*S)*R,t[6]=(b*E-l*y+m*d)*R,t[7]=(l*O-h*E-m*P)*R,t[8]=(h*y-b*O+m*v)*R,t):null}function S(t,r,n){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function A(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function j(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function I(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t}function L(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t}function N(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t}function R(t,r,n,a){return t[0]=r[0]+n[0]*a,t[1]=r[1]+n[1]*a,t[2]=r[2]+n[2]*a,t[3]=r[3]+n[3]*a,t[4]=r[4]+n[4]*a,t[5]=r[5]+n[5]*a,t[6]=r[6]+n[6]*a,t[7]=r[7]+n[7]*a,t[8]=r[8]+n[8]*a,t}function Y(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function _(r,n){var a=r[0],e=r[1],o=r[2],u=r[3],s=r[4],i=r[5],c=r[6],f=r[7],p=r[8],M=n[0],x=n[1],h=n[2],b=n[3],l=n[4],m=n[5],v=n[6],P=n[7],O=n[8];return Math.abs(a-M)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(e-x)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(u-b)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(i-m)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-v)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(f-P)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(p-O)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))}var w=h;exports.mul=w;var g=L;exports.sub=g;
},{"./common.js":"PxDr"}],"WdlT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=h,exports.transpose=M,exports.invert=i,exports.adjoint=c,exports.determinant=p,exports.multiply=f,exports.translate=x,exports.scale=b,exports.rotate=l,exports.rotateX=v,exports.rotateY=m,exports.rotateZ=P,exports.fromTranslation=O,exports.fromScaling=E,exports.fromRotation=S,exports.fromXRotation=y,exports.fromYRotation=I,exports.fromZRotation=L,exports.fromRotationTranslation=N,exports.fromQuat2=R,exports.getTranslation=d,exports.getScaling=g,exports.getRotation=A,exports.fromRotationTranslationScale=Y,exports.fromRotationTranslationScaleOrigin=T,exports.fromQuat=w,exports.frustum=_,exports.perspective=j,exports.perspectiveFromFieldOfView=q,exports.ortho=D,exports.lookAt=k,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=W,exports.subtract=X,exports.multiplyScalar=Z,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var n={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=e?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,r&&r.set(t,n),n}function n(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function e(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function s(a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){var v=new t.ARRAY_TYPE(16);return v[0]=a,v[1]=r,v[2]=n,v[3]=e,v[4]=o,v[5]=s,v[6]=u,v[7]=h,v[8]=M,v[9]=i,v[10]=c,v[11]=p,v[12]=f,v[13]=x,v[14]=b,v[15]=l,v}function u(t,a,r,n,e,o,s,u,h,M,i,c,p,f,x,b,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=h,t[8]=M,t[9]=i,t[10]=c,t[11]=p,t[12]=f,t[13]=x,t[14]=b,t[15]=l,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],s=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=s,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function i(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15],m=r*u-n*s,P=r*h-e*s,O=r*M-o*s,E=n*h-e*u,S=n*M-o*u,y=e*M-o*h,I=i*b-c*x,L=i*l-p*x,N=i*v-f*x,R=c*l-p*b,d=c*v-f*b,g=p*v-f*l,A=m*g-P*d+O*R+E*N-S*L+y*I;return A?(A=1/A,t[0]=(u*g-h*d+M*R)*A,t[1]=(e*d-n*g-o*R)*A,t[2]=(b*y-l*S+v*E)*A,t[3]=(p*S-c*y-f*E)*A,t[4]=(h*N-s*g-M*L)*A,t[5]=(r*g-e*N+o*L)*A,t[6]=(l*O-x*y-v*P)*A,t[7]=(i*y-p*O+f*P)*A,t[8]=(s*d-u*N+M*I)*A,t[9]=(n*N-r*d-o*I)*A,t[10]=(x*S-b*O+v*m)*A,t[11]=(c*O-i*S-f*m)*A,t[12]=(u*L-s*R-h*I)*A,t[13]=(r*R-n*L+e*I)*A,t[14]=(b*P-x*E-l*m)*A,t[15]=(i*E-c*P+p*m)*A,t):null}function c(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=a[4],u=a[5],h=a[6],M=a[7],i=a[8],c=a[9],p=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15];return t[0]=u*(p*v-f*l)-c*(h*v-M*l)+b*(h*f-M*p),t[1]=-(n*(p*v-f*l)-c*(e*v-o*l)+b*(e*f-o*p)),t[2]=n*(h*v-M*l)-u*(e*v-o*l)+b*(e*M-o*h),t[3]=-(n*(h*f-M*p)-u*(e*f-o*p)+c*(e*M-o*h)),t[4]=-(s*(p*v-f*l)-i*(h*v-M*l)+x*(h*f-M*p)),t[5]=r*(p*v-f*l)-i*(e*v-o*l)+x*(e*f-o*p),t[6]=-(r*(h*v-M*l)-s*(e*v-o*l)+x*(e*M-o*h)),t[7]=r*(h*f-M*p)-s*(e*f-o*p)+i*(e*M-o*h),t[8]=s*(c*v-f*b)-i*(u*v-M*b)+x*(u*f-M*c),t[9]=-(r*(c*v-f*b)-i*(n*v-o*b)+x*(n*f-o*c)),t[10]=r*(u*v-M*b)-s*(n*v-o*b)+x*(n*M-o*u),t[11]=-(r*(u*f-M*c)-s*(n*f-o*c)+i*(n*M-o*u)),t[12]=-(s*(c*l-p*b)-i*(u*l-h*b)+x*(u*p-h*c)),t[13]=r*(c*l-p*b)-i*(n*l-e*b)+x*(n*p-e*c),t[14]=-(r*(u*l-h*b)-s*(n*l-e*b)+x*(n*h-e*u)),t[15]=r*(u*p-h*c)-s*(n*p-e*c)+i*(n*h-e*u),t}function p(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],h=t[7],M=t[8],i=t[9],c=t[10],p=t[11],f=t[12],x=t[13],b=t[14],l=t[15];return(a*s-r*o)*(c*l-p*b)-(a*u-n*o)*(i*l-p*x)+(a*h-e*o)*(i*b-c*x)+(r*u-n*s)*(M*l-p*f)-(r*h-e*s)*(M*b-c*f)+(n*h-e*u)*(M*x-i*f)}function f(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3];return t[0]=P*n+O*u+E*c+S*b,t[1]=P*e+O*h+E*p+S*l,t[2]=P*o+O*M+E*f+S*v,t[3]=P*s+O*i+E*x+S*m,P=r[4],O=r[5],E=r[6],S=r[7],t[4]=P*n+O*u+E*c+S*b,t[5]=P*e+O*h+E*p+S*l,t[6]=P*o+O*M+E*f+S*v,t[7]=P*s+O*i+E*x+S*m,P=r[8],O=r[9],E=r[10],S=r[11],t[8]=P*n+O*u+E*c+S*b,t[9]=P*e+O*h+E*p+S*l,t[10]=P*o+O*M+E*f+S*v,t[11]=P*s+O*i+E*x+S*m,P=r[12],O=r[13],E=r[14],S=r[15],t[12]=P*n+O*u+E*c+S*b,t[13]=P*e+O*h+E*p+S*l,t[14]=P*o+O*M+E*f+S*v,t[15]=P*s+O*i+E*x+S*m,t}function x(t,a,r){var n,e,o,s,u,h,M,i,c,p,f,x,b=r[0],l=r[1],v=r[2];return a===t?(t[12]=a[0]*b+a[4]*l+a[8]*v+a[12],t[13]=a[1]*b+a[5]*l+a[9]*v+a[13],t[14]=a[2]*b+a[6]*l+a[10]*v+a[14],t[15]=a[3]*b+a[7]*l+a[11]*v+a[15]):(n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=h,t[6]=M,t[7]=i,t[8]=c,t[9]=p,t[10]=f,t[11]=x,t[12]=n*b+u*l+c*v+a[12],t[13]=e*b+h*l+p*v+a[13],t[14]=o*b+M*l+f*v+a[14],t[15]=s*b+i*l+x*v+a[15]),t}function b(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function l(a,r,n,e){var o,s,u,h,M,i,c,p,f,x,b,l,v,m,P,O,E,S,y,I,L,N,R,d,g=e[0],A=e[1],Y=e[2],T=Math.hypot(g,A,Y);return T<t.EPSILON?null:(g*=T=1/T,A*=T,Y*=T,o=Math.sin(n),u=1-(s=Math.cos(n)),h=r[0],M=r[1],i=r[2],c=r[3],p=r[4],f=r[5],x=r[6],b=r[7],l=r[8],v=r[9],m=r[10],P=r[11],O=g*g*u+s,E=A*g*u+Y*o,S=Y*g*u-A*o,y=g*A*u-Y*o,I=A*A*u+s,L=Y*A*u+g*o,N=g*Y*u+A*o,R=A*Y*u-g*o,d=Y*Y*u+s,a[0]=h*O+p*E+l*S,a[1]=M*O+f*E+v*S,a[2]=i*O+x*E+m*S,a[3]=c*O+b*E+P*S,a[4]=h*y+p*I+l*L,a[5]=M*y+f*I+v*L,a[6]=i*y+x*I+m*L,a[7]=c*y+b*I+P*L,a[8]=h*N+p*R+l*d,a[9]=M*N+f*R+v*d,a[10]=i*N+x*R+m*d,a[11]=c*N+b*R+P*d,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function v(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],s=a[5],u=a[6],h=a[7],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+M*n,t[5]=s*e+i*n,t[6]=u*e+c*n,t[7]=h*e+p*n,t[8]=M*e-o*n,t[9]=i*e-s*n,t[10]=c*e-u*n,t[11]=p*e-h*n,t}function m(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[8],i=a[9],c=a[10],p=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-M*n,t[1]=s*e-i*n,t[2]=u*e-c*n,t[3]=h*e-p*n,t[8]=o*n+M*e,t[9]=s*n+i*e,t[10]=u*n+c*e,t[11]=h*n+p*e,t}function P(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],s=a[1],u=a[2],h=a[3],M=a[4],i=a[5],c=a[6],p=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+M*n,t[1]=s*e+i*n,t[2]=u*e+c*n,t[3]=h*e+p*n,t[4]=M*e-o*n,t[5]=i*e-s*n,t[6]=c*e-u*n,t[7]=p*e-h*n,t}function O(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function E(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(a,r,n){var e,o,s,u=n[0],h=n[1],M=n[2],i=Math.hypot(u,h,M);return i<t.EPSILON?null:(u*=i=1/i,h*=i,M*=i,e=Math.sin(r),s=1-(o=Math.cos(r)),a[0]=u*u*s+o,a[1]=h*u*s+M*e,a[2]=M*u*s-h*e,a[3]=0,a[4]=u*h*s-M*e,a[5]=h*h*s+o,a[6]=M*h*s+u*e,a[7]=0,a[8]=u*M*s+h*e,a[9]=h*M*s-u*e,a[10]=M*M*s+o,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function y(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=n+n,h=e+e,M=o+o,i=n*u,c=n*h,p=n*M,f=e*h,x=e*M,b=o*M,l=s*u,v=s*h,m=s*M;return t[0]=1-(f+b),t[1]=c+m,t[2]=p-v,t[3]=0,t[4]=c-m,t[5]=1-(i+b),t[6]=x+l,t[7]=0,t[8]=p+v,t[9]=x-l,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function R(a,r){var n=new t.ARRAY_TYPE(3),e=-r[0],o=-r[1],s=-r[2],u=r[3],h=r[4],M=r[5],i=r[6],c=r[7],p=e*e+o*o+s*s+u*u;return p>0?(n[0]=2*(h*u+c*e+M*s-i*o)/p,n[1]=2*(M*u+c*o+i*e-h*s)/p,n[2]=2*(i*u+c*s+h*o-M*e)/p):(n[0]=2*(h*u+c*e+M*s-i*o),n[1]=2*(M*u+c*o+i*e-h*s),n[2]=2*(i*u+c*s+h*o-M*e)),N(a,r,n),a}function d(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function g(t,a){var r=a[0],n=a[1],e=a[2],o=a[4],s=a[5],u=a[6],h=a[8],M=a[9],i=a[10];return t[0]=Math.hypot(r,n,e),t[1]=Math.hypot(o,s,u),t[2]=Math.hypot(h,M,i),t}function A(a,r){var n=new t.ARRAY_TYPE(3);g(n,r);var e=1/n[0],o=1/n[1],s=1/n[2],u=r[0]*e,h=r[1]*o,M=r[2]*s,i=r[4]*e,c=r[5]*o,p=r[6]*s,f=r[8]*e,x=r[9]*o,b=r[10]*s,l=u+c+b,v=0;return l>0?(v=2*Math.sqrt(l+1),a[3]=.25*v,a[0]=(p-x)/v,a[1]=(f-M)/v,a[2]=(h-i)/v):u>c&&u>b?(v=2*Math.sqrt(1+u-c-b),a[3]=(p-x)/v,a[0]=.25*v,a[1]=(h+i)/v,a[2]=(f+M)/v):c>b?(v=2*Math.sqrt(1+c-u-b),a[3]=(f-M)/v,a[0]=(h+i)/v,a[1]=.25*v,a[2]=(p+x)/v):(v=2*Math.sqrt(1+b-u-c),a[3]=(h-i)/v,a[0]=(f+M)/v,a[1]=(p+x)/v,a[2]=.25*v),a}function Y(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=a[3],h=e+e,M=o+o,i=s+s,c=e*h,p=e*M,f=e*i,x=o*M,b=o*i,l=s*i,v=u*h,m=u*M,P=u*i,O=n[0],E=n[1],S=n[2];return t[0]=(1-(x+l))*O,t[1]=(p+P)*O,t[2]=(f-m)*O,t[3]=0,t[4]=(p-P)*E,t[5]=(1-(c+l))*E,t[6]=(b+v)*E,t[7]=0,t[8]=(f+m)*S,t[9]=(b-v)*S,t[10]=(1-(c+x))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function T(t,a,r,n,e){var o=a[0],s=a[1],u=a[2],h=a[3],M=o+o,i=s+s,c=u+u,p=o*M,f=o*i,x=o*c,b=s*i,l=s*c,v=u*c,m=h*M,P=h*i,O=h*c,E=n[0],S=n[1],y=n[2],I=e[0],L=e[1],N=e[2],R=(1-(b+v))*E,d=(f+O)*E,g=(x-P)*E,A=(f-O)*S,Y=(1-(p+v))*S,T=(l+m)*S,w=(x+P)*y,_=(l-m)*y,j=(1-(p+b))*y;return t[0]=R,t[1]=d,t[2]=g,t[3]=0,t[4]=A,t[5]=Y,t[6]=T,t[7]=0,t[8]=w,t[9]=_,t[10]=j,t[11]=0,t[12]=r[0]+I-(R*I+A*L+w*N),t[13]=r[1]+L-(d*I+Y*L+_*N),t[14]=r[2]+N-(g*I+T*L+j*N),t[15]=1,t}function w(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],s=r+r,u=n+n,h=e+e,M=r*s,i=n*s,c=n*u,p=e*s,f=e*u,x=e*h,b=o*s,l=o*u,v=o*h;return t[0]=1-c-x,t[1]=i+v,t[2]=p-l,t[3]=0,t[4]=i-v,t[5]=1-M-x,t[6]=f+b,t[7]=0,t[8]=p+l,t[9]=f-b,t[10]=1-M-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,a,r,n,e,o,s){var u=1/(r-a),h=1/(e-n),M=1/(o-s);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*h,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*h,t[10]=(s+o)*M,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*M,t[15]=0,t}function j(t,a,r,n,e){var o,s=1/Math.tan(a/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(o=1/(n-e),t[10]=(e+n)*o,t[14]=2*e*n*o):(t[10]=-1,t[14]=-2*n),t}function q(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),h=2/(s+u),M=2/(e+o);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M,t[6]=0,t[7]=0,t[8]=-(s-u)*h*.5,t[9]=(e-o)*M*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function D(t,a,r,n,e,o,s){var u=1/(a-r),h=1/(n-e),M=1/(o-s);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*M,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*h,t[14]=(s+o)*M,t[15]=1,t}function k(a,r,n,e){var o,s,u,M,i,c,p,f,x,b,l=r[0],v=r[1],m=r[2],P=e[0],O=e[1],E=e[2],S=n[0],y=n[1],I=n[2];return Math.abs(l-S)<t.EPSILON&&Math.abs(v-y)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?h(a):(p=l-S,f=v-y,x=m-I,o=O*(x*=b=1/Math.hypot(p,f,x))-E*(f*=b),s=E*(p*=b)-P*x,u=P*f-O*p,(b=Math.hypot(o,s,u))?(o*=b=1/b,s*=b,u*=b):(o=0,s=0,u=0),M=f*u-x*s,i=x*o-p*u,c=p*s-f*o,(b=Math.hypot(M,i,c))?(M*=b=1/b,i*=b,c*=b):(M=0,i=0,c=0),a[0]=o,a[1]=M,a[2]=p,a[3]=0,a[4]=s,a[5]=i,a[6]=f,a[7]=0,a[8]=u,a[9]=c,a[10]=x,a[11]=0,a[12]=-(o*l+s*v+u*m),a[13]=-(M*l+i*v+c*m),a[14]=-(p*l+f*v+x*m),a[15]=1,a)}function F(t,a,r,n){var e=a[0],o=a[1],s=a[2],u=n[0],h=n[1],M=n[2],i=e-r[0],c=o-r[1],p=s-r[2],f=i*i+c*c+p*p;f>0&&(i*=f=1/Math.sqrt(f),c*=f,p*=f);var x=h*p-M*c,b=M*i-u*p,l=u*c-h*i;return(f=x*x+b*b+l*l)>0&&(x*=f=1/Math.sqrt(f),b*=f,l*=f),t[0]=x,t[1]=b,t[2]=l,t[3]=0,t[4]=c*l-p*b,t[5]=p*x-i*l,t[6]=i*b-c*x,t[7]=0,t[8]=i,t[9]=c,t[10]=p,t[11]=0,t[12]=e,t[13]=o,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function W(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function X(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function Z(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var n=a[0],e=a[1],o=a[2],s=a[3],u=a[4],h=a[5],M=a[6],i=a[7],c=a[8],p=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3],y=r[4],I=r[5],L=r[6],N=r[7],R=r[8],d=r[9],g=r[10],A=r[11],Y=r[12],T=r[13],w=r[14],_=r[15];return Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(e-O)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(O))&&Math.abs(o-E)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(s-S)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-y)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(h-I)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(M-L)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(c-R)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(p-d)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(d))&&Math.abs(f-g)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(x-A)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(A))&&Math.abs(b-Y)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(Y))&&Math.abs(l-T)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(v-w)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(w))&&Math.abs(m-_)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(_))}var G=f;exports.mul=G;var H=X;exports.sub=H;
},{"./common.js":"PxDr"}],"Ijz7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.length=a,exports.fromValues=s,exports.copy=u,exports.set=i,exports.add=c,exports.subtract=p,exports.multiply=f,exports.divide=x,exports.ceil=h,exports.floor=M,exports.min=v,exports.max=l,exports.round=d,exports.scale=m,exports.scaleAndAdd=b,exports.distance=y,exports.squaredDistance=O,exports.squaredLength=P,exports.negate=q,exports.inverse=A,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=Y,exports.hermite=j,exports.bezier=_,exports.random=w,exports.transformMat4=D,exports.transformMat3=L,exports.transformQuat=N,exports.rotateX=I,exports.rotateY=T,exports.rotateZ=z,exports.angle=S,exports.zero=k,exports.str=W,exports.exactEquals=F,exports.equals=Q,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var s=o?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function o(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function a(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function s(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function i(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function c(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function p(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function f(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function h(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function M(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function d(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function m(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function b(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.hypot(e,n,o)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function P(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function q(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function A(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function g(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function Y(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function j(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,f=3*i*s,x=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*f+o[0]*x,t[1]=r[1]*c+e[1]*p+n[1]*f+o[1]*x,t[2]=r[2]*c+e[2]*p+n[2]*f+o[2]*x,t}function w(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function L(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function N(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,f=a*u-n*c,x=n*i-o*u,h=o*x-a*f,M=a*p-n*x,v=n*f-o*p,l=2*s;return p*=l,f*=l,x*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+f+M,t[2]=c+x+v,t}function I(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function z(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function S(t,r){var e=t[0],n=t[1],o=t[2],a=r[0],s=r[1],u=r[2],i=Math.sqrt(e*e+n*n+o*o)*Math.sqrt(a*a+s*s+u*u),c=i&&E(t,r)/i;return Math.acos(Math.min(Math.max(c,-1),1))}function k(t){return t[0]=0,t[1]=0,t[2]=0,t}function W(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function F(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Q(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var V=p;exports.sub=V;var X=f;exports.mul=X;var Z=x;exports.div=Z;var B=y;exports.dist=B;var C=O;exports.sqrDist=C;var G=a;exports.len=G;var H=P;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,s){var u,i;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=J;
},{"./common.js":"PxDr"}],"QGfo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=M,exports.max=l,exports.round=v,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=O,exports.length=y,exports.squaredLength=A,exports.negate=P,exports.inverse=R,exports.normalize=q,exports.dot=E,exports.cross=g,exports.lerp=w,exports.random=D,exports.transformMat4=j,exports.transformQuat=N,exports.zero=Y,exports.str=_,exports.exactEquals=L,exports.equals=I,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function o(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function a(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function u(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function l(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function v(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.hypot(e,n,o,a)}function O(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function y(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.hypot(r,e,n,o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function R(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function q(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*e+n*n+o*o+a*a;return u>0&&(u=1/Math.sqrt(u)),t[0]=e*u,t[1]=n*u,t[2]=o*u,t[3]=a*u,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function g(t,r,e,n){var o=e[0]*n[1]-e[1]*n[0],a=e[0]*n[2]-e[2]*n[0],u=e[0]*n[3]-e[3]*n[0],s=e[1]*n[2]-e[2]*n[1],i=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],p=r[0],f=r[1],x=r[2],h=r[3];return t[0]=f*c-x*i+h*s,t[1]=-p*c+x*u-h*a,t[2]=p*i-f*u+h*o,t[3]=-p*s+f*a-x*o,t}function w(t,r,e,n){var o=r[0],a=r[1],u=r[2],s=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=u+n*(e[2]-u),t[3]=s+n*(e[3]-s),t}function D(r,e){var n,o,a,u,s,i;e=e||1;do{s=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(s>=1);do{i=(a=2*t.RANDOM()-1)*a+(u=2*t.RANDOM()-1)*u}while(i>=1);var c=Math.sqrt((1-s)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*u*c,r}function j(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*u,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*u,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*u,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*u,t}function N(t,r,e){var n=r[0],o=r[1],a=r[2],u=e[0],s=e[1],i=e[2],c=e[3],p=c*n+s*a-i*o,f=c*o+i*n-u*a,x=c*a+u*o-s*n,h=-u*n-s*o-i*a;return t[0]=p*c+h*-u+f*-i-x*-s,t[1]=f*c+h*-s+x*-u-p*-i,t[2]=x*c+h*-i+p*-s-f*-u,t[3]=r[3],t}function Y(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function L(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function I(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-p)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}var S=c;exports.sub=S;var T=p;exports.mul=T;var k=f;exports.div=k;var z=b;exports.dist=z;var W=O;exports.sqrDist=W;var F=y;exports.len=F;var Q=A;exports.sqrLen=Q;var V=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],a(t,t,u),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();exports.forEach=V;
},{"./common.js":"PxDr"}],"PXH2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=s,exports.identity=u,exports.setAxisAngle=p,exports.getAxisAngle=c,exports.getAngle=i,exports.multiply=x,exports.rotateX=l,exports.rotateY=f,exports.rotateZ=v,exports.calculateW=h,exports.exp=M,exports.ln=q,exports.pow=d,exports.slerp=m,exports.random=g,exports.invert=y,exports.conjugate=P,exports.fromMat3=A,exports.fromEuler=O,exports.str=j,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var t=n(require("./common.js")),r=n(require("./mat3.js")),e=n(require("./vec3.js")),o=n(require("./vec4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=o?Object.getOwnPropertyDescriptor(t,n):null;s&&(s.get||s.set)?Object.defineProperty(e,n,s):e[n]=t[n]}return e.default=t,r&&r.set(t,e),e}function s(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function u(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function p(t,r,e){e*=.5;var o=Math.sin(e);return t[0]=o*r[0],t[1]=o*r[1],t[2]=o*r[2],t[3]=Math.cos(e),t}function c(r,e){var o=2*Math.acos(e[3]),a=Math.sin(o/2);return a>t.EPSILON?(r[0]=e[0]/a,r[1]=e[1]/a,r[2]=e[2]/a):(r[0]=1,r[1]=0,r[2]=0),o}function i(t,r){var e=D(t,r);return Math.acos(2*e*e-1)}function x(t,r,e){var o=r[0],a=r[1],n=r[2],s=r[3],u=e[0],p=e[1],c=e[2],i=e[3];return t[0]=o*i+s*u+a*c-n*p,t[1]=a*i+s*p+n*u-o*c,t[2]=n*i+s*c+o*p-a*u,t[3]=s*i-o*u-a*p-n*c,t}function l(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+s*u,t[1]=a*p+n*u,t[2]=n*p-a*u,t[3]=s*p-o*u,t}function f(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p-n*u,t[1]=a*p+s*u,t[2]=n*p+o*u,t[3]=s*p-a*u,t}function v(t,r,e){e*=.5;var o=r[0],a=r[1],n=r[2],s=r[3],u=Math.sin(e),p=Math.cos(e);return t[0]=o*p+a*u,t[1]=a*p-o*u,t[2]=n*p+s*u,t[3]=s*p-n*u,t}function h(t,r){var e=r[0],o=r[1],a=r[2];return t[0]=e,t[1]=o,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-o*o-a*a)),t}function M(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=Math.exp(n),p=s>0?u*Math.sin(s)/s:0;return t[0]=e*p,t[1]=o*p,t[2]=a*p,t[3]=u*Math.cos(s),t}function q(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=Math.sqrt(e*e+o*o+a*a),u=s>0?Math.atan2(s,n)/s:0;return t[0]=e*u,t[1]=o*u,t[2]=a*u,t[3]=.5*Math.log(e*e+o*o+a*a+n*n),t}function d(t,r,e){return q(t,r),_(t,t,e),M(t,t),t}function m(r,e,o,a){var n,s,u,p,c,i=e[0],x=e[1],l=e[2],f=e[3],v=o[0],h=o[1],M=o[2],q=o[3];return(s=i*v+x*h+l*M+f*q)<0&&(s=-s,v=-v,h=-h,M=-M,q=-q),1-s>t.EPSILON?(n=Math.acos(s),u=Math.sin(n),p=Math.sin((1-a)*n)/u,c=Math.sin(a*n)/u):(p=1-a,c=a),r[0]=p*i+c*v,r[1]=p*x+c*h,r[2]=p*l+c*M,r[3]=p*f+c*q,r}function g(r){var e=t.RANDOM(),o=t.RANDOM(),a=t.RANDOM(),n=Math.sqrt(1-e),s=Math.sqrt(e);return r[0]=n*Math.sin(2*Math.PI*o),r[1]=n*Math.cos(2*Math.PI*o),r[2]=s*Math.sin(2*Math.PI*a),r[3]=s*Math.cos(2*Math.PI*a),r}function y(t,r){var e=r[0],o=r[1],a=r[2],n=r[3],s=e*e+o*o+a*a+n*n,u=s?1/s:0;return t[0]=-e*u,t[1]=-o*u,t[2]=-a*u,t[3]=n*u,t}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function A(t,r){var e,o=r[0]+r[4]+r[8];if(o>0)e=Math.sqrt(o+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var n=(a+1)%3,s=(a+2)%3;e=Math.sqrt(r[3*a+a]-r[3*n+n]-r[3*s+s]+1),t[a]=.5*e,e=.5/e,t[3]=(r[3*n+s]-r[3*s+n])*e,t[n]=(r[3*n+a]+r[3*a+n])*e,t[s]=(r[3*s+a]+r[3*a+s])*e}return t}function O(t,r,e,o){var a=.5*Math.PI/180;r*=a,e*=a,o*=a;var n=Math.sin(r),s=Math.cos(r),u=Math.sin(e),p=Math.cos(e),c=Math.sin(o),i=Math.cos(o);return t[0]=n*p*i-s*u*c,t[1]=s*u*i+n*p*c,t[2]=s*p*c-n*u*i,t[3]=s*p*i+n*u*c,t}function j(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var b=o.clone;exports.clone=b;var E=o.fromValues;exports.fromValues=E;var I=o.copy;exports.copy=I;var L=o.set;exports.set=L;var R=o.add;exports.add=R;var w=x;exports.mul=w;var _=o.scale;exports.scale=_;var D=o.dot;exports.dot=D;var N=o.lerp;exports.lerp=N;var V=o.length;exports.length=V;var Y=V;exports.len=Y;var z=o.squaredLength;exports.squaredLength=z;var T=z;exports.sqrLen=T;var W=o.normalize;exports.normalize=W;var k=o.exactEquals;exports.exactEquals=k;var S=o.equals;exports.equals=S;var F=function(){var t=e.create(),r=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(a,n,s){var u=e.dot(n,s);return u<-.999999?(e.cross(t,r,n),e.len(t)<1e-6&&e.cross(t,o,n),e.normalize(t,t),p(a,t,Math.PI),a):u>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(e.cross(t,n,s),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+u,W(a,a))}}();exports.rotationTo=F;var X=function(){var t=s(),r=s();return function(e,o,a,n,s,u){return m(t,o,s,u),m(r,a,n,u),m(e,t,r,2*u*(1-u)),e}}();exports.sqlerp=X;var Z=function(){var t=r.create();return function(r,e,o,a){return t[0]=o[0],t[3]=o[1],t[6]=o[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],W(r,A(r,t))}}();exports.setAxes=Z;
},{"./common.js":"PxDr","./mat3.js":"SRDq","./vec3.js":"Ijz7","./vec4.js":"QGfo"}],"BYXr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=o,exports.clone=s,exports.fromValues=u,exports.fromRotationTranslationValues=p,exports.fromRotationTranslation=i,exports.fromTranslation=c,exports.fromRotation=f,exports.fromMat4=x,exports.copy=h,exports.identity=l,exports.set=M,exports.getDual=b,exports.setDual=m,exports.getTranslation=d,exports.translate=R,exports.rotateX=y,exports.rotateY=O,exports.rotateZ=g,exports.rotateByQuatAppend=A,exports.rotateByQuatPrepend=E,exports.rotateAroundAxis=L,exports.add=Y,exports.multiply=q,exports.scale=T,exports.lerp=w,exports.invert=I,exports.conjugate=N,exports.normalize=Q,exports.str=V,exports.exactEquals=W,exports.equals=X,exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.dot=exports.mul=exports.setReal=exports.getReal=void 0;var t=n(require("./common.js")),r=n(require("./quat.js")),e=n(require("./mat4.js"));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=a();if(r&&r.has(t))return r.get(t);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=n?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(e,o,s):e[o]=t[o]}return e.default=t,r&&r.set(t,e),e}function o(){var r=new t.ARRAY_TYPE(8);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function s(r){var e=new t.ARRAY_TYPE(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function u(r,e,a,n,o,s,u,p){var i=new t.ARRAY_TYPE(8);return i[0]=r,i[1]=e,i[2]=a,i[3]=n,i[4]=o,i[5]=s,i[6]=u,i[7]=p,i}function p(r,e,a,n,o,s,u){var p=new t.ARRAY_TYPE(8);p[0]=r,p[1]=e,p[2]=a,p[3]=n;var i=.5*o,c=.5*s,f=.5*u;return p[4]=i*n+c*a-f*e,p[5]=c*n+f*r-i*a,p[6]=f*n+i*e-c*r,p[7]=-i*r-c*e-f*a,p}function i(t,r,e){var a=.5*e[0],n=.5*e[1],o=.5*e[2],s=r[0],u=r[1],p=r[2],i=r[3];return t[0]=s,t[1]=u,t[2]=p,t[3]=i,t[4]=a*i+n*p-o*u,t[5]=n*i+o*s-a*p,t[6]=o*i+a*u-n*s,t[7]=-a*s-n*u-o*p,t}function c(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function f(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function x(a,n){var o=r.create();e.getRotation(o,n);var s=new t.ARRAY_TYPE(3);return e.getTranslation(s,n),i(a,o,s),a}function h(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function l(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function M(t,r,e,a,n,o,s,u,p){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t}var v=r.copy;function b(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}exports.getReal=v;var P=r.copy;function m(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function d(t,r){var e=r[4],a=r[5],n=r[6],o=r[7],s=-r[0],u=-r[1],p=-r[2],i=r[3];return t[0]=2*(e*i+o*s+a*p-n*u),t[1]=2*(a*i+o*u+n*s-e*p),t[2]=2*(n*i+o*p+e*u-a*s),t}function R(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=.5*e[0],p=.5*e[1],i=.5*e[2],c=r[4],f=r[5],x=r[6],h=r[7];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=s*u+n*i-o*p+c,t[5]=s*p+o*u-a*i+f,t[6]=s*i+a*p-n*u+x,t[7]=-a*u-n*p-o*i+h,t}function y(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateX(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function O(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateY(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function g(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],c=e[6],f=e[7],x=p*u+f*n+i*s-c*o,h=i*u+f*o+c*n-p*s,l=c*u+f*s+p*o-i*n,M=f*u-p*n-i*o-c*s;return r.rotateZ(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=x*u+M*n+h*s-l*o,t[5]=h*u+M*o+l*n-x*s,t[6]=l*u+M*s+x*o-h*n,t[7]=M*u-x*n-h*o-l*s,t}function A(t,r,e){var a=e[0],n=e[1],o=e[2],s=e[3],u=r[0],p=r[1],i=r[2],c=r[3];return t[0]=u*s+c*a+p*o-i*n,t[1]=p*s+c*n+i*a-u*o,t[2]=i*s+c*o+u*n-p*a,t[3]=c*s-u*a-p*n-i*o,u=r[4],p=r[5],i=r[6],c=r[7],t[4]=u*s+c*a+p*o-i*n,t[5]=p*s+c*n+i*a-u*o,t[6]=i*s+c*o+u*n-p*a,t[7]=c*s-u*a-p*n-i*o,t}function E(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[0],p=e[1],i=e[2],c=e[3];return t[0]=a*c+s*u+n*i-o*p,t[1]=n*c+s*p+o*u-a*i,t[2]=o*c+s*i+a*p-n*u,t[3]=s*c-a*u-n*p-o*i,u=e[4],p=e[5],i=e[6],c=e[7],t[4]=a*c+s*u+n*i-o*p,t[5]=n*c+s*p+o*u-a*i,t[6]=o*c+s*i+a*p-n*u,t[7]=s*c-a*u-n*p-o*i,t}function L(r,e,a,n){if(Math.abs(n)<t.EPSILON)return h(r,e);var o=Math.hypot(a[0],a[1],a[2]);n*=.5;var s=Math.sin(n),u=s*a[0]/o,p=s*a[1]/o,i=s*a[2]/o,c=Math.cos(n),f=e[0],x=e[1],l=e[2],M=e[3];r[0]=f*c+M*u+x*i-l*p,r[1]=x*c+M*p+l*u-f*i,r[2]=l*c+M*i+f*p-x*u,r[3]=M*c-f*u-x*p-l*i;var v=e[4],b=e[5],P=e[6],m=e[7];return r[4]=v*c+m*u+b*i-P*p,r[5]=b*c+m*p+P*u-v*i,r[6]=P*c+m*i+v*p-b*u,r[7]=m*c-v*u-b*p-P*i,r}function Y(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t}function q(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[4],p=e[5],i=e[6],c=e[7],f=r[4],x=r[5],h=r[6],l=r[7],M=e[0],v=e[1],b=e[2],P=e[3];return t[0]=a*P+s*M+n*b-o*v,t[1]=n*P+s*v+o*M-a*b,t[2]=o*P+s*b+a*v-n*M,t[3]=s*P-a*M-n*v-o*b,t[4]=a*c+s*u+n*i-o*p+f*P+l*M+x*b-h*v,t[5]=n*c+s*p+o*u-a*i+x*P+l*v+h*M-f*b,t[6]=o*c+s*i+a*p-n*u+h*P+l*b+f*v-x*M,t[7]=s*c-a*u-n*p-o*i+l*P-f*M-x*v-h*b,t}exports.setReal=P;var j=q;function T(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t}exports.mul=j;var _=r.dot;function w(t,r,e,a){var n=1-a;return _(r,e)<0&&(a=-a),t[0]=r[0]*n+e[0]*a,t[1]=r[1]*n+e[1]*a,t[2]=r[2]*n+e[2]*a,t[3]=r[3]*n+e[3]*a,t[4]=r[4]*n+e[4]*a,t[5]=r[5]*n+e[5]*a,t[6]=r[6]*n+e[6]*a,t[7]=r[7]*n+e[7]*a,t}function I(t,r){var e=k(r);return t[0]=-r[0]/e,t[1]=-r[1]/e,t[2]=-r[2]/e,t[3]=r[3]/e,t[4]=-r[4]/e,t[5]=-r[5]/e,t[6]=-r[6]/e,t[7]=r[7]/e,t}function N(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}exports.dot=_;var S=r.length;exports.length=S;var D=S;exports.len=D;var k=r.squaredLength;exports.squaredLength=k;var B=k;function Q(t,r){var e=k(r);if(e>0){e=Math.sqrt(e);var a=r[0]/e,n=r[1]/e,o=r[2]/e,s=r[3]/e,u=r[4],p=r[5],i=r[6],c=r[7],f=a*u+n*p+o*i+s*c;t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=(u-a*f)/e,t[5]=(p-n*f)/e,t[6]=(i-o*f)/e,t[7]=(c-s*f)/e}return t}function V(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function W(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function X(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],c=r[7],f=e[0],x=e[1],h=e[2],l=e[3],M=e[4],v=e[5],b=e[6],P=e[7];return Math.abs(a-f)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(n-x)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-l)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(u-M)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(p-v)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(v))&&Math.abs(i-b)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(c-P)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))}exports.sqrLen=B;
},{"./common.js":"PxDr","./quat.js":"PXH2","./mat4.js":"WdlT"}],"cHtt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=a,exports.copy=u,exports.set=s,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=f,exports.ceil=x,exports.floor=h,exports.min=v,exports.max=M,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=y,exports.length=P,exports.squaredLength=q,exports.negate=A,exports.inverse=O,exports.normalize=g,exports.dot=E,exports.cross=R,exports.lerp=j,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=w,exports.transformMat3=D,exports.transformMat4=L,exports.rotate=T,exports.angle=I,exports.zero=N,exports.str=k,exports.exactEquals=z,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var t=e(require("./common.js"));function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function e(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}function n(){var r=new t.ARRAY_TYPE(2);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0),r}function o(r){var e=new t.ARRAY_TYPE(2);return e[0]=r[0],e[1]=r[1],e}function a(r,e){var n=new t.ARRAY_TYPE(2);return n[0]=r,n[1]=e,n}function u(t,r){return t[0]=r[0],t[1]=r[1],t}function s(t,r,e){return t[0]=r,t[1]=e,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t}function f(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t}function v(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t}function M(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1];return Math.hypot(e,n)}function y(t,r){var e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n}function P(t){var r=t[0],e=t[1];return Math.hypot(r,e)}function q(t){var r=t[0],e=t[1];return r*r+e*e}function A(t,r){return t[0]=-r[0],t[1]=-r[1],t}function O(t,r){return t[0]=1/r[0],t[1]=1/r[1],t}function g(t,r){var e=r[0],n=r[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=r[0]*o,t[1]=r[1]*o,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]}function R(t,r,e){var n=r[0]*e[1]-r[1]*e[0];return t[0]=t[1]=0,t[2]=n,t}function j(t,r,e,n){var o=r[0],a=r[1];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t}function Y(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI;return r[0]=Math.cos(n)*e,r[1]=Math.sin(n)*e,r}function _(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o,t[1]=e[1]*n+e[3]*o,t}function w(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[2]*o+e[4],t[1]=e[1]*n+e[3]*o+e[5],t}function D(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[3]*o+e[6],t[1]=e[1]*n+e[4]*o+e[7],t}function L(t,r,e){var n=r[0],o=r[1];return t[0]=e[0]*n+e[4]*o+e[12],t[1]=e[1]*n+e[5]*o+e[13],t}function T(t,r,e,n){var o=r[0]-e[0],a=r[1]-e[1],u=Math.sin(n),s=Math.cos(n);return t[0]=o*s-a*u+e[0],t[1]=o*u+a*s+e[1],t}function I(t,r){var e=t[0],n=t[1],o=r[0],a=r[1],u=Math.sqrt(e*e+n*n)*Math.sqrt(o*o+a*a),s=u&&(e*o+n*a)/u;return Math.acos(Math.min(Math.max(s,-1),1))}function N(t){return t[0]=0,t[1]=0,t}function k(t){return"vec2("+t[0]+", "+t[1]+")"}function z(t,r){return t[0]===r[0]&&t[1]===r[1]}function S(r,e){var n=r[0],o=r[1],a=e[0],u=e[1];return Math.abs(n-a)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))}var W=P;exports.len=W;var F=c;exports.sub=F;var V=p;exports.mul=V;var B=f;exports.div=B;var C=b;exports.dist=C;var G=y;exports.sqrDist=G;var H=q;exports.sqrLen=H;var J=function(){var t=n();return function(r,e,n,o,a,u){var s,i;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,s=n;s<i;s+=e)t[0]=r[s],t[1]=r[s+1],a(t,t,u),r[s]=t[0],r[s+1]=t[1];return r}}();exports.forEach=J;
},{"./common.js":"PxDr"}],"CPlc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec4=exports.vec3=exports.vec2=exports.quat2=exports.quat=exports.mat4=exports.mat3=exports.mat2d=exports.mat2=exports.glMatrix=void 0;var e=v(require("./common.js"));exports.glMatrix=e;var r=v(require("./mat2.js"));exports.mat2=r;var t=v(require("./mat2d.js"));exports.mat2d=t;var o=v(require("./mat3.js"));exports.mat3=o;var a=v(require("./mat4.js"));exports.mat4=a;var s=v(require("./quat.js"));exports.quat=s;var u=v(require("./quat2.js"));exports.quat2=u;var p=v(require("./vec2.js"));exports.vec2=p;var i=v(require("./vec3.js"));exports.vec3=i;var n=v(require("./vec4.js"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c();if(r&&r.has(e))return r.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(t,a,s):t[a]=e[a]}return t.default=e,r&&r.set(e,t),t}exports.vec4=n;
},{"./common.js":"PxDr","./mat2.js":"hSOw","./mat2d.js":"n7Ma","./mat3.js":"SRDq","./mat4.js":"WdlT","./quat.js":"PXH2","./quat2.js":"BYXr","./vec2.js":"cHtt","./vec3.js":"Ijz7","./vec4.js":"QGfo"}],"E7NK":[function(require,module,exports) {
var t=function(){function t(r,a){this.data=new Array(r.length);for(var i=0,n=r[0].length;i<r.length;i++){this.data[i]=new Array(n);for(var o=0;o<n;o++)this.data[i][o]=r[i][o]}if(a){if("object"!=typeof a[0])for(i=0;i<a.length;i++)a[i]=[a[i]];this.mirror=new t(a)}}return t.prototype.swap=function(t,r){this.mirror&&this.mirror.swap(t,r);var a=this.data[t];this.data[t]=this.data[r],this.data[r]=a},t.prototype.multline=function(t,r){this.mirror&&this.mirror.multline(t,r);for(var a=this.data[t],i=a.length-1;i>=0;i--)a[i]*=r},t.prototype.addmul=function(t,r,a){this.mirror&&this.mirror.addmul(t,r,a);for(var i=this.data[t],n=this.data[r],o=i.length-1;o>=0;o--)i[o]=i[o]+a*n[o]},t.prototype.hasNullLine=function(t){for(var r=0;r<this.data[t].length;r++)if(0!==this.data[t][r])return!1;return!0},t.prototype.gauss=function(){for(var t=0,r=this.data.length,a=this.data[0].length,i=[],n=0;n<a;n++){for(var o=0,e=0,s=t;s<r;s++){var h=this.data[s][n];Math.abs(h)>Math.abs(o)&&(e=s,o=h)}if(0===o)i.push(t);else{this.multline(e,1/o),this.swap(e,t);for(var l=0;l<r;l++)l!==t&&this.addmul(l,t,-this.data[l][n])}t++}for(l=0;l<i.length;l++)if(!this.mirror.hasNullLine(i[l]))throw new Error("singular matrix");return this.mirror.data},exports.solve=function(r,a){var i=new t(r,a).gauss();if(i.length>0&&1===i[0].length)for(var n=0;n<i.length;n++)i[n]=i[n][0];return i},exports.invert=function(r){return new t(r,function(t){for(var r=new Array(t),a=0;a<t;a++){r[a]=new Array(t);for(var i=0;i<t;i++)r[a][i]=a===i?1:0}return r}(r.length)).gauss()},exports}();"object"==typeof module.exports&&(module.exports=t);
},{}],"mxaG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mat=void 0;var r=n(require("linear-solve"));function n(r){return r&&r.__esModule?r:{default:r}}function t(r,n){for(var t=n.length,e=n[0].length,o=0;o<t;o++)for(var a=0;a<e;a++)r[a][o]=n[o][a]}function e(r){for(var n=0,t=r.length;n<t;n++)for(var e=0,o=r.length;e<o;e++)r[n][e]=n===e?1:0}function o(r,n,t){for(var e=0,o=r.length;e<o;e++)for(var a=0,f=r.length;a<f;a++)r[e][a]=n[e][a]*t}function a(r,n,t){if(n===t)throw new Error;for(var e=n.length,o=t.length,a=t[0].length,f=0,l=e;f<l;f++)for(var u=0,v=a;u<v;u++){for(var i=0,g=0,h=o;g<h;g++)i+=n[f][g]*t[g][u];r[f][u]=i}}function f(r,n){for(var t=new Array(r),e=0;e<r;e++)t[e]=new Float64Array(n);return t}function l(r,n){for(var t=n.length,e=n[0].length,o=0;o<t;o++)for(var a=0;a<e;a++)r[o][a]=n[o][a]}function u(r){var n=f(r.length,r[0].length);return l(n,r),n}function v(n,t,e){for(var o=r.default.solve(t,e),a=0,f=o.length;a<f;a++)n[a][0]=o[a]}function i(n,t){for(var e=r.default.invert(t),o=t[0].length,a=t.length,f=0;f<o;f++)for(var l=0;l<a;l++)n[f][l]=e[f][l]}function g(r,n,t){for(var e=n.length,o=n[0].length,a=0;a<e;a++)for(var f=0;f<o;f++)r[a][f]=n[a][f]+t[a][f]}function h(r,n,t){for(var e=n.length,o=n[0].length,a=0;a<e;a++)for(var f=0;f<o;f++)r[a][f]=n[a][f]-t[a][f]}function c(r){for(var n=0,t=r.length,e=r[0].length,o=0;o<t;o++)for(var a=0;a<e;a++)n+=Math.pow(r[o][a],2);return n}function s(r){return Math.sqrt(c(r))}function d(r){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,t=r.length,e=r[0].length,o="",a=0;a<t;a++){for(var f=0;f<e;f++)o+=r[a][f].toFixed(n)+", ";o+="\n"}return o}function p(r,n){console.log(d(r,n))}var y={transpose:t,identity:e,scale:o,multiply:a,create:f,copy:l,clone:u,solve:v,invert:i,add:g,subtract:h,magnitudeSquared:c,magnitude:s,toString:d,log:p};exports.mat=y;
},{"linear-solve":"E7NK"}],"zUgk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MatrixPool=void 0;var t=require("./utils/matrix.js");function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function r(n,a){e(this,r);var i=[],o=0;this.get=function(){var e=i[o];return e||(i[o]=e=t.mat.create(n,a)),o++,e},this.releaseAll=function(){o=0}},n=function t(){e(this,t);var n={},a=[];this.get=function(t,e){var i=n[t];i||(i=n[t]={});var o=i[e];return o||(o=i[e]=new r(t,e),a.push(o)),o.get()},this.releaseAll=function(){for(var t=0,e=a.length;t<e;t++)a[t].releaseAll()}};exports.MatrixPool=n;
},{"./utils/matrix.js":"mxaG"}],"YGip":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.accumulateClosureError=a,exports.accumulateTargetError=n;var r=require("gl-matrix");function o(r){throw new Error('"'+r+'" is read-only')}var e=new Float64Array(3),t=new Float64Array(4);function a(o,a,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{isConverged:!1,rowCount:7,totalError:0},s=o.translationConvergeThreshold,v=o.rotationConvergeThreshold,u=o.translationErrorClamp,c=o.rotationErrorClamp,d=o.translationFactor,g=o.rotationFactor,E=a.translationDoFCount,C=a.rotationDoFCount,f=a.dofFlags,F=a.dof;a.getClosureError(e,t);var h=7;a.isGoal&&(e[0]*=f[0],e[1]*=f[1],e[2]*=f[2],h=E,0===C?(t[0]=0,t[1]=0,t[2]=0,t[3]=0):h+=4);var p=!1,m=0,D=r.vec3.length(e),w=r.vec4.length(t);if(D<s&&w<v&&(p=!0),m+=D+w,l)if(D>u&&r.vec3.scale(e,e,u/D),r.vec4.scale(e,e,d),w>c&&r.vec4.scale(t,t,c/w),r.vec4.scale(t,t,g),a.isGoal){for(var T=0;T<E;T++){var O=F[T];l[n+T][0]=e[O]}3===a.rotationDoFCount&&(l[n+E+0][0]=t[0],l[n+E+1][0]=t[1],l[n+E+2][0]=t[2],l[n+E+3][0]=t[3])}else l[n+0][0]=e[0],l[n+1][0]=e[1],l[n+2][0]=e[2],l[n+3][0]=t[0],l[n+4][0]=t[1],l[n+5][0]=t[2],l[n+6][0]=t[3];return i.totalError=m,i.isConverged=p,i.rowCount=h,i}function n(t,a,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{isConverged:!1,rowCount:7,totalError:0},s=t.translationConvergeThreshold,v=t.rotationConvergeThreshold,u=t.lockedJointDoFCount,c=t.translationErrorClamp,d=t.rotationErrorClamp,g=t.lockedJointDoF,E=a.dofTarget,C=a.dofValues,f=a.translationDoFCount,F=a.rotationDoFCount,h=a.translationFactor,p=a.rotationFactor,m=r.vec3.distance(C,E),D=E[DOF.EX]-C[DOF.EX]+E[DOF.EY]-C[DOF.EY]+E[DOF.EZ]-C[DOF.EZ],w=u.get(a)||0;if(i.rowCount=f+F-w,i.isConverged=m<s&&D<v,errorResult.totalError=m+D,l){var T=g.get(a),O=0!==w,x=0;e[0]=E[0]-C[0],e[1]=E[1]-C[1],e[2]=E[2]-C[2];var y=r.vec3.length(e);r.vec3.scale(e,e,h*c/y);for(var V=0,k=f;V<k;V++){var A=dofList[V];O&&T[A]||(l[n+x][0]=e[A],o("rowIndex"),x++)}tempEuler[0]=a.dofTarget[3]-a.dofValues[3],tempEuler[1]=a.dofTarget[4]-a.dofValues[4],tempEuler[2]=a.dofTarget[5]-a.dofValues[5];var G=r.vec3.length(tempEuler);r.vec3.scale(tempEuler,tempEuler,p*d/G);for(var I=f,J=f+F;I<J;I++){var L=dofList[I];O&&T[L]||(l[n+x][0]=tempEuler[L],o("rowIndex"),x++)}}}
},{"gl-matrix":"CPlc"}],"PkL6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RAD2DEG=exports.DEG2RAD=exports.HALF_PI=exports.PI2=exports.PI=void 0;var e=Math.PI;exports.PI=e;var r=2*e;exports.PI2=r;var t=e/2;exports.HALF_PI=t;var o=Math.PI/180;exports.DEG2RAD=o;var s=1/o;exports.RAD2DEG=s;
},{}],"L6Ev":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.smallestDifferenceQuaternion=t,exports.quaternionDistance=a,exports.quaternionSquaredDistance=c;var e=require("gl-matrix"),r=new Float64Array(16);function t(t,n,a){e.vec4.scale(r,a,-1),e.vec4.squaredDistance(n,r)<e.vec4.squaredDistance(n,a)?e.vec4.subtract(t,n,r):e.vec4.subtract(t,n,a)}var n=new Float64Array(16);function a(r,a){return t(n,r,a),e.vec4.length(n)}function c(r,a){return t(n,r,a),e.vec4.squaredLength(n)}
},{"gl-matrix":"CPlc"}],"Rg8q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEuler=m,exports.getMatrixDifference=v;var t=require("gl-matrix"),r=require("./constants.js"),e=require("./quaternion.js");function n(t,r){return l(t)||u(t,r)||o(t,r)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,r){if(t){if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function u(t,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!r||e.length!==r);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return e}}function l(t){if(Array.isArray(t))return t}var c=new Float64Array(3),s=new Float64Array(4),f=new Float64Array(3),y=new Float64Array(4);function m(t,e){var a=n(e,4),o=a[0],i=a[1],u=a[2],l=a[3],c=2*(l*o+i*u),s=1-2*(o*o+i*i),f=Math.atan2(c,s),y=2*(l*i-u*o);y=(y=y>1?1:y)<-1?-1:y;var m=Math.asin(y),v=2*(l*u+o*i),b=1-2*(i*i+u*u),g=Math.atan2(v,b);return t[0]=f*r.RAD2DEG,t[1]=m*r.RAD2DEG,t[2]=g*r.RAD2DEG,t}function v(r,n,a,o){t.mat4.getTranslation(c,r),t.mat4.getRotation(s,r),t.mat4.getTranslation(f,n),t.mat4.getRotation(y,n),t.vec3.subtract(a,c,f),(0,e.smallestDifferenceQuaternion)(o,s,y)}
},{"gl-matrix":"CPlc","./constants.js":"PkL6","./quaternion.js":"L6Ev"}],"rw8i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChainSolver=exports.SOLVE_STATUS_NAMES=exports.SOLVE_STATUS=void 0;var t=require("gl-matrix"),r=require("./MatrixPool.js"),e=require("./utils/solver.js"),o=require("./utils/matrix.js"),a=require("./utils/glmatrix.js");function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function n(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}var s=new r.MatrixPool,u=new Float64Array(16),h=new Float64Array(16),f=new Float64Array(16),c=new Float64Array(16),v=new Float64Array(4),g=new Float64Array(3),d=new Float64Array(4),C=new Float64Array(3),p=[],m=[],F={rowCount:0,isConverged:!1,totalError:0},D={errorRows:0,freeDoF:0,totalError:0},E={CONVERGED:0,STALLED:1,DIVERGED:2,TIMEOUT:3};exports.SOLVE_STATUS=E;var w=Object.entries(E).sort(function(t,r){return t[1]-r[1]}).map(function(t){return t[0]});exports.SOLVE_STATUS_NAMES=w;var y=function(){function r(t){i(this,r),this.chain=Array.from(t),this.targets=null,this.affectedClosures=null,this.affectedConnectedClosures=null,this.lockedJointDoFCount=null,this.lockedJointDoF=null,this.prevDoFValues=null,this.maxIterations=-1,this.translationConvergeThreshold=-1,this.rotationConvergeThreshold=-1,this.translationFactor=-1,this.rotationFactor=-1,this.translationStep=-1,this.rotationStep=-1,this.translationErrorClamp=-1,this.rotationErrorClamp=-1,this.stallThreshold=-1,this.dampingFactor=-1,this.divergeThreshold=-1,this.restPoseFactor=-1,this.init()}return l(r,[{key:"init",value:function(){var t=this.chain,r=t.filter(function(t){return t.targetSet||t.isClosure}),e=new Map,o=new Map,a=new Map,i=new Map,n=new Map;t.forEach(function(t){i.set(t,new Set),n.set(t,new Set),e.set(t,new Uint8Array(6)),a.set(t,new Float64Array(6))}),r.forEach(function(t){if(t.isClosure){for(var r=t;r;)r.isJoint&&i.get(r).add(t),r=r.parent;for(r=t.child;r;)r.isJoint&&n.get(r).add(t),r=r.parent}}),this.targets=r,this.affectedClosures=i,this.affectedConnectedClosures=n,this.lockedJointDoF=e,this.lockedJointDoFCount=o,this.prevDoFValues=a}},{key:"solve",value:function(){var t=this.divergeThreshold,r=this.stallThreshold,e=this.chain,a=this.restPoseFactor,i=this.lockedJointDoFCount,n=this.prevDoFValues,l=0,u=1/0,h=-1;i.clear();for(var f=0,c=e.length;f<c;f++){var v=e[f];(v.targetSet||v.restPoseSet)&&v.tryMinimizeEulerAngles()}for(;;){s.releaseAll();for(var g=0,d=e.length;g<d;g++){e[g].updateMatrixWorld()}p.length=0,m.length=0,this.countUnconvergedVariables(m,p,D);var C=D.freeDoF,F=D.errorRows,w=D.totalError;if(0===F){h=E.CONVERGED;break}if(w>u+t){n.forEach(function(t,r){r.dofValues.set(t),r.setMatrixDoFNeedsUpdate()}),h=E.DIVERGED;break}if(u=w,++l>this.maxIterations){h=E.TIMEOUT;break}var y=s.get(F,1);this.fillErrorVector(p,y);var S=s.get(F,C);this.fillJacobian(p,m,S);var k=s.get(F,F);o.mat.identity(k),o.mat.scale(k,k,Math.pow(this.dampingFactor,2));var x=s.get(C,F);o.mat.transpose(x,S);var A=s.get(F,F);o.mat.multiply(A,S,x);var T=s.get(F,F);o.mat.add(T,A,k);var b=s.get(F,F);o.mat.invert(b,T);var M=s.get(C,F);o.mat.multiply(M,x,b);var V=s.get(C,1);if(o.mat.multiply(V,M,y),0!==a){for(var J=s.get(C,1),O=s.get(C,1),U=0,P=0,L=m.length;P<L;P++){var R=m[P],_=this.lockedJointDoFCount.get(R)||0,j=0!==_,G=this.lockedJointDoF.get(R),W=R.rotationDoFCount+R.translationDoFCount-_;if(R.restPoseSet)for(var I=R.dof,q=R.dofValues,N=R.dofRestPose,z=0;z<W;z++){var B=I[z];j&&G[B]||(J[U][0]=q[B]-N[B],U++)}else for(var H=0;H<W;H++)J[U][0]=0,U++}var K=s.get(C,C);o.mat.multiply(K,M,S);var Q=s.get(C,C);o.mat.identity(Q),o.mat.subtract(Q,Q,K),o.mat.multiply(O,Q,J);for(var X=0;X<C;X++)V[X][0]+=J[X][0]*a}if(r>0){for(var Y=!0,Z=0,$=V.length;Z<$;Z++){var tt=V[Z][0];if(Math.abs(tt)>r){Y=!1;break}}if(Y){h=E.STALLED;break}}n.forEach(function(t,r){t.set(r.dofValues)}),this.applyJointAngles(m,V)}return p.length=0,m.length=0,h}},{key:"applyJointAngles",value:function(t,r){for(var e=this.lockedJointDoF,o=this.lockedJointDoFCount,a=!1,i=0,n=0,l=t.length;n<l;n++)for(var s=t[n],u=s.dof,h=e.get(s),f=o.has(s),c=0,v=u.length;c<v;c++){var g=u[c];if(!f||!h[g]){var d=s.getDoFValue(g);if(s.setDoFValue(g,d-r[i][0])){o.has(s)||(o.set(s,0),h.fill(0));var C=o.get(s);o.set(s,C+1),h[g]=1,a=!0}i++}}if(i!==r.length)throw new Error;return a}},{key:"fillJacobian",value:function(r,e,o){for(var i=this.translationStep,n=this.rotationStep,l=this.lockedJointDoF,s=this.lockedJointDoFCount,p=this.translationFactor,m=this.rotationFactor,F=this.affectedClosures,D=this.affectedConnectedClosures,E=0,w=0,y=e.length;w<y;w++){var S=e[w],k=F.get(S),x=D.get(S),A=S.dof,T=S.translationDoFCount+S.rotationDoFCount,b=s.has(S),M=l.get(S);t.mat4.invert(c,S.matrixWorld);for(var V=0;V<T;V++){var J=A[V];if(!b||!M[J]){var O=0,U=J<3?i:n;S.getDeltaWorldMatrix(J,U,f)&&(U*=-1);for(var P=0,L=r.length;P<L;P++){var R=r[P];if(R.isClosure)if(k.has(R)||x.has(R))if(R.getClosureError(g,v),x.has(R)?(t.mat4.multiply(u,c,R.child.matrixWorld),t.mat4.multiply(h,f,u),(0,a.getMatrixDifference)(R.matrixWorld,h,C,d)):(t.mat4.multiply(u,c,R.matrixWorld),t.mat4.multiply(h,f,u),(0,a.getMatrixDifference)(h,R.child.matrixWorld,C,d)),t.vec3.subtract(g,C,g),t.vec3.scale(g,g,p/U),t.vec4.subtract(v,d,v),t.vec4.scale(v,v,m/U),R.isGoal){for(var _=R.translationDoFCount,j=R.rotationDoFCount,G=R.dof,W=0;W<_;W++){var I=G[W];o[O+W][E]=g[I]}3===j&&(o[O+_+0][E]=v[0],o[O+_+1][E]=v[1],o[O+_+2][E]=v[2],o[O+_+3][E]=v[3],O+=4),O+=_}else o[O+0][E]=g[0],o[O+1][E]=g[1],o[O+2][E]=g[2],o[O+3][E]=v[0],o[O+4][E]=v[1],o[O+5][E]=v[2],o[O+6][E]=v[3],O+=7;else{var q=7;R.isGoal&&(q=R.translationDoFCount,3===R.rotationDoFCount&&(q+=4));for(var N=0;N<q;N++)o[O+N][E]=0;O+=q}if(R.targetSet){var z=R.translationDoFCount+R.rotationDoFCount;if(S===R)for(var B=0;B<z;B++)o[O+E][E]=-1;else for(var H=0;H<z;H++)o[O+H][E]=0;O+=z}}E++}}}if(E!==o[0].length)throw new Error}},{key:"fillErrorVector",value:function(t,r){for(var o=0,a=0,i=t.length;a<i;a++){var n=t[a];n.isClosure&&((0,e.accumulateClosureError)(this,n,o,r,F),o+=F.rowCount),n.targetSet&&(accumulateTargetError(this,n,o,r,F),o+=F.rowCount)}}},{key:"countUnconvergedVariables",value:function(t,r,o){for(var a=this.lockedJointDoFCount,i=this.chain,n=0,l=0,s=0,u=0,h=0,f=i.length;h<f;h++){var c=!1,v=i[h],g=a.get(v)||0;v.isClosure&&((0,e.accumulateClosureError)(this,v,l,null,F),F.isConverged||(s+=F.rowCount,n+=F.totalError),c=!0,l+=F.rowCount);var d=v.dof;v.targetSet&&(accumulateTargetError(this,v,l,null,F),F.isConverged||(s+=F.rowCount,n+=F.totalError),c=!0,l+=F.rowCount),v.isGoal||(u+=d.length-g,t.push(v)),c&&r.push(v)}0===s&&(l=0),o.errorRows=l,o.freeDoF=u,o.totalError=n}}]),r}();exports.ChainSolver=y;
},{"gl-matrix":"CPlc","./MatrixPool.js":"zUgk","./utils/solver.js":"YGip","./utils/matrix.js":"mxaG","./utils/glmatrix.js":"Rg8q"}],"a3Ki":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Solver=void 0;var t=require("./ChainSolver.js");function r(t){return a(t)||n(t)||e(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(t,r){if(t){if("string"==typeof t)return i(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,r):void 0}}function n(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function a(t){if(Array.isArray(t))return i(t)}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,e=new Array(r);o<r;o++)e[o]=t[o];return e}function s(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function h(t,r){for(var o=0;o<r.length;o++){var e=r[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function l(t,r,o){return r&&h(t.prototype,r),o&&h(t,o),t}var c=function(){function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];s(this,o),this.maxIterations=5,this.stallThreshold=1e-4,this.dampingFactor=.001,this.divergeThreshold=.01,this.restPoseFactor=.01,this.translationConvergeThreshold=.001,this.rotationConvergeThreshold=1e-5,this.translationFactor=1,this.rotationFactor=1,this.translationStep=.001,this.rotationStep=.001,this.translationErrorClamp=.1,this.rotationErrorClamp=.1,this.roots=Array.isArray(t)?r(t):[t],this.solvers=null,this.updateStructure()}return l(o,[{key:"updateStructure",value:function(){var r=this.roots,o=[],e=new Set,n=new Set;r.forEach(function t(r){if(r.isJoint){var a=r;if(e.add(a),a.isClosure){for(var i=new Set,s=a.child;s;){if(s.isJoint){if(e.has(s))break;i.add(s),n.add(s)}s=s.parent}e.forEach(function(t){i.add(t),n.add(t)}),o.push(i)}}for(var h=r.children,l=0,c=h.length;l<c;l++)t(h[l]);e.delete(r)});for(var a=[],i=function(){var t=o.pop();a.push(t);for(var r=function(r){var n=o[r],a=!1;n.forEach(function(r){a=a||t.has(r)}),a&&(n.forEach(function(r){return t.add(r)}),o.splice(r,1),r--),e=r},e=0;e<o.length;e++)r(e)};o.length;)i();var s=new Set;r.forEach(function(t){return t.traverse(function(t){t.isJoint&&t.dof.length>0&&!n.has(t)&&s.add(t)})}),this.solvers=a.map(function(r){return new t.ChainSolver(r)}),this.nonChainJoints=s}},{key:"solve",value:function(){var t=this.solvers;this.nonChainJoints.forEach(function(t){t.targetSet&&(t.dofValues.set(t.dofTarget),t.setMatrixDoFNeedsUpdate())});for(var r=[],o=0,e=t.length;o<e;o++){var n=t[o];n.maxIterations=this.maxIterations,n.stallThreshold=this.stallThreshold,n.dampingFactor=this.dampingFactor,n.divergeThreshold=this.divergeThreshold,n.restPoseFactor=this.restPoseFactor,n.translationConvergeThreshold=this.translationConvergeThreshold,n.rotationConvergeThreshold=this.rotationConvergeThreshold,n.translationFactor=this.translationFactor,n.rotationFactor=this.rotationFactor,n.translationStep=this.translationStep,n.rotationStep=this.rotationStep,n.translationErrorClamp=this.translationErrorClamp,n.rotationErrorClamp=this.rotationErrorClamp;var a=n.solve();r.push(a)}return r}}]),o}();exports.Solver=c;
},{"./ChainSolver.js":"rw8i"}],"nSQ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Frame=void 0;var t=require("gl-matrix"),r=require("./utils/quaternion.js"),e=require("./utils/constants.js");function a(t){return s(t)||o(t)||n(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,r){if(t){if("string"==typeof t)return l(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,r):void 0}}function o(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t){if(Array.isArray(t))return l(t)}function l(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,a=new Array(r);e<r;e++)a[e]=t[e];return a}function d(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function u(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function h(t,r,e){return r&&u(t.prototype,r),e&&u(t,e),t}var m=new Float64Array(16),p=new Float64Array(16),c=new Float32Array(4),f=new Float32Array(3),x=new Set,y=function(){function i(){d(this,i),this.name="",this.quaternion=new Float32Array([0,0,0,1]),this.position=new Float32Array(3),this.matrix=new Float64Array(16),t.mat4.identity(this.matrix),this.matrixWorld=new Float64Array(16),t.mat4.identity(this.matrixWorld),this.matrixNeedsUpdate=!1,this.matrixWorldNeedsUpdate=!1,this.parent=null,this.children=[]}return h(i,[{key:"setPosition",value:function(){for(var r=this.position,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];t.vec3.sqrDist(r,a)>1e-10&&(r[0]=a[0],r[1]=a[1],r[2]=a[2],this.setMatrixNeedsUpdate())}},{key:"setEuler",value:function(r,i,n){t.quat.fromEuler(c,r*e.RAD2DEG,i*e.RAD2DEG,n*e.RAD2DEG),this.setQuaternion.apply(this,a(c))}},{key:"setQuaternion",value:function(){for(var t=this.quaternion,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];(0,r.quaternionSquaredDistance)(t,a)>1e-10&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],this.setMatrixNeedsUpdate())}},{key:"setWorldPosition",value:function(r,e,i){var n=this.parent;f[0]=r,f[1]=e,f[2]=i,n&&(n.updateMatrixWorld(),t.mat4.invert(m,n.matrixWorld),t.vec3.transformMat4(f,f,m)),this.setPosition.apply(this,a(f))}},{key:"setWorldEuler",value:function(r,i,n){t.quat.fromEuler(c,r*e.RAD2DEG,i*e.RAD2DEG,n*e.RAD2DEG),this.setWorldQuaternion.apply(this,a(c))}},{key:"setWorldQuaternion",value:function(r,e,i,n){c[0]=r,c[1]=e,c[2]=i,c[3]=n,this&&(this.updateMatrixWorld(),t.mat4.invert(m,this.matrixWorld),t.mat4.fromQuat(p,c),t.mat4.multiply(p,m,p),t.mat4.getRotation(c,p)),this.setQuaternion.apply(this,a(c))}},{key:"getWorldPosition",value:function(r){this.updateMatrixWorld(),t.mat4.getTranslation(r,this.matrixWorld)}},{key:"getWorldQuaternion",value:function(r){this.updateMatrixWorld(),t.mat4.getRotation(r,this.matrixWorld)}},{key:"traverseParents",value:function(t){x.clear(),x.add(this);for(var r=this;r&&!x.has(r);){if(t(r))return;x.add(r),r=r.parent}}},{key:"traverse",value:function(t){x.clear(),x.add(this);for(var r=[this],e=0,a=1;e<a;){var i=r[e];if(!t(i))for(var n=i.children,o=0,s=n.length;o<s;o++){var l=n[o];x.has(l)||(x.add(l),r[a]=l,a++)}e++}}},{key:"addChild",value:function(t){if(t.parent)throw new Error;if(t===this)throw new Error;this.traverseParents(function(r){if(r===t)throw new Error}),t.parent=this,this.children.push(t),t.setMatrixWorldNeedsUpdate()}},{key:"removeChild",value:function(t){if(t.parent!==this)throw new Error;var r=this.children.indexOf(t);this.children.splice(r,1),t.parent=null,t.setMatrixWorldNeedsUpdate()}},{key:"attachChild",value:function(r){this.updateMatrixWorld(),r.updateMatrixWorld(),this.addChild(r),t.mat4.invert(m,this.matrixWorld),t.mat4.multiply(r.matrix,m,r.matrixWorld),t.mat4.getTranslation(r.position,r.matrix),t.mat4.getRotation(r.quaternion,r.matrix)}},{key:"detachChild",value:function(r){this.updateMatrixWorld(),r.updateMatrixWorld(),this.removeChild(r),t.mat4.copy(r.matrix,r.matrixWorld),t.mat4.getTranslation(r.position,r.matrix),t.mat4.getRotation(r.quaternion,r.matrix)}},{key:"computeMatrixWorld",value:function(){this.parent?t.mat4.multiply(this.matrixWorld,this.parent.matrixWorld,this.matrix):t.mat4.copy(this.matrixWorld,this.matrix)}},{key:"setMatrixNeedsUpdate",value:function(){!1===this.matrixNeedsUpdate&&(this.matrixNeedsUpdate=!0,this.setMatrixWorldNeedsUpdate())}},{key:"setMatrixWorldNeedsUpdate",value:function(){this.traverse(function(t){return!!t.matrixWorldNeedsUpdate||(t.matrixWorldNeedsUpdate=!0,!1)})}},{key:"updateMatrix",value:function(){this.matrixNeedsUpdate&&(t.mat4.fromRotationTranslation(this.matrix,this.quaternion,this.position),this.matrixNeedsUpdate=!1)}},{key:"updateMatrixWorld",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.parent;this.matrixWorldNeedsUpdate&&(e&&e.matrixWorldNeedsUpdate&&e.updateMatrixWorld(!1),this.updateMatrix(),this.computeMatrixWorld(),this.matrixWorldNeedsUpdate=!1),r&&this.traverse(function(r){t!==r&&r.updateMatrixWorld(!1)})}}]),i}();exports.Frame=y;
},{"gl-matrix":"CPlc","./utils/quaternion.js":"L6Ev","./utils/constants.js":"PkL6"}],"wWea":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clampEulerValue=r,exports.toSmallestEulerValueDistance=a,exports.toSmallestEulerDistance=n,exports.diffEulerDistance=s,exports.getRedundantEulerRepresentation=o,exports.toSmallestRedundantTwistRepresentation=i,exports.getClosestEulerRepresentation=p,exports.isRedundantTwist=u;var t=require("gl-matrix"),e=require("./constants.js");function r(t){var r=t%e.PI2;return r>e.PI?r-=e.PI2:r<=-e.PI&&(r+=e.PI2),r}function a(t,a){var n=Math.round(t/e.PI2)*e.PI2+r(a),s=n-t;return Math.abs(s)>e.PI&&(n-=Math.sign(s)*e.PI2),n}function n(t,e,r){t[0]=a(e[0],r[0]),t[1]=a(e[1],r[1]),t[2]=a(e[2],r[2])}function s(t,e){return Math.abs(t[0]-e[0])+Math.abs(t[1]-e[1])+Math.abs(t[2]-e[2])}function o(t,r){t[0]=r[0]+e.PI,t[1]=e.PI-r[1],t[2]=r[2]+e.PI}function u(t){var a=r(t[1]);return!(Math.abs(Math.abs(a)-e.HALF_PI)>1e-7)}function i(t,e,s){if(!u(s))return!1;var o=r(s[1]),i=-1*Math.sign(o),c=s[0]+i*s[2];return t[0]=e[0],t[1]=a(e[1],s[1]),t[2]=a(e[2],i*(c-e[0])),n(t,e,t),!0}var c=new Float64Array(3),l=new Float64Array(3);function p(e,r,a){var p=1/0;if(u(a)){i(c,r,a),o(l,a),i(l,r,l);var v=s(r,c),P=s(r,l);v<P?(t.vec3.copy(e,c),p=v):(t.vec3.copy(e,l),p=P)}n(c,r,a),o(l,a),n(l,r,l);var f=s(r,c),I=s(r,l);(f<p||I<p)&&(f<I?t.vec3.copy(e,c):t.vec3.copy(e,l))}
},{"gl-matrix":"CPlc","./constants.js":"PkL6"}],"Ns4N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Joint=exports.DOF_NAMES=exports.DOF=void 0;var t=require("gl-matrix"),e=require("./Frame.js"),i=require("./utils/euler.js"),o=require("./utils/glmatrix.js"),r=require("./utils/constants.js");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function u(t,e,i){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var o=f(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=p();return function(){var i,o=v(t);if(e){var r=v(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return y(this,i)}}function y(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?m(t):e}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g={X:0,Y:1,Z:2,EX:3,EY:4,EZ:5};exports.DOF=g;var F=Object.entries(g).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]});exports.DOF_NAMES=F;var D=new Float64Array(16),E=new Float64Array(16),x=new Float32Array(4),k=new Float32Array(3),w=new Float32Array(3),V=new Float32Array(3),_=new Float32Array(6);function R(e,i){t.quat.fromEuler(x,i[g.EX]*r.RAD2DEG,i[g.EY]*r.RAD2DEG,i[g.EZ]*r.RAD2DEG),t.mat4.fromRotationTranslation(e,x,i)}var P=function(n){h(f,e.Frame);var s=d(f);function f(){var e;return a(this,f),(e=s.call(this)).isJoint=!0,e.child=null,e.isClosure=!1,e.trackJointWrap=!1,e.rotationDoFCount=0,e.translationDoFCount=0,e.dof=[],e.dofFlags=new Uint8Array(6),e.dofValues=new Float32Array(6),e.dofTarget=new Float32Array(6),e.dofRestPose=new Float32Array(6),e.minDoFLimit=new Float32Array(6).fill(-1/0),e.maxDoFLimit=new Float32Array(6).fill(1/0),e.targetSet=!1,e.restPoseSet=!1,e.matrixDoFNeedsUpdate=!1,e.matrixDoF=new Float64Array(16),t.mat4.identity(e.matrixDoF),e.cachedIdentityDoFMatrixWorld=new Float64Array(16),t.mat4.identity(e.cachedIdentityDoFMatrixWorld),e}return l(f,[{key:"_getQuaternion",value:function(e,i){t.quat.fromEuler(i,e[g.EX],e[g.EY],e[g.EZ])}},{key:"_getEuler",value:function(t,e){e[0]=t[g.EX],e[1]=t[g.EY],e[2]=t[g.EZ]}},{key:"_getPosition",value:function(t,e){e[0]=t[g.X],e[1]=t[g.Y],e[2]=t[g.Z]}},{key:"_setValue",value:function(t,e,i){if(t===this.minDoFLimit||t==this.maxDoFLimit)throw new Error;if(e<0||e>6||"number"!=typeof e)throw new Error;var o=this.minDoFLimit[e],r=this.maxDoFLimit[e];return i<o&&(i=o),i>r&&(i=r),t[e]=i,i===r||i===o}},{key:"_setValues",value:function(t,e){for(var i=this.dof,o=0,r=e.length;o<r;o++)this._setValue(t,i[o],e[o])}},{key:"_setViaFullPosition",value:function(t,e){for(var i=this.dofFlags,o=0;o<3;o++)t[o]=i[o]*e[o]}},{key:"_setViaFullEuler",value:function(t,e){if(3!==this.rotationDoFCount)throw new Error;for(var i=this.dofFlags,o=3;o<6;o++)t[o]=i[o]*e[o-3];this.tryMinimizeEulerAngles()}},{key:"_setViaQuaternion",value:function(t,e){if((0,o.getEuler)(V,e),V[0]*=r.DEG2RAD,V[1]*=r.DEG2RAD,V[2]*=r.DEG2RAD,this.trackJointWrap){var n=this.dofValues;k[0]=n[g.EX],k[1]=n[g.EY],k[2]=n[g.EZ],(0,i.getClosestEulerRepresentation)(V,k,V)}this._setViaFullEuler(t,V)}},{key:"clearDoF",value:function(){this.setDoF()}},{key:"setDoF",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(t,i){if(t<0||t>=6)throw new Error("Joint: Invalid degree of freedom enum "+t+".");if(e.includes(t,i+1))throw new Error("Joint: Duplicate degree of freedom "+F[t]+"specified.");if(0!==i&&e[i-1]>t)throw new Error("Joint: Joints degrees of freedom must be specified in position then rotation, XYZ order")}),this.dof=e,this.dofValues.fill(0),this.dofTarget.fill(0),this.dofRestPose.fill(0),this.minDoFLimit.fill(-1/0),this.maxDoFLimit.fill(1/0),this.setMatrixDoFNeedsUpdate();for(var o=0;o<6;o++)this.dofFlags[o]=Number(e.includes(o));this.rotationDoFCount=this.dofFlags[g.EX]+this.dofFlags[g.EY]+this.dofFlags[g.EZ],this.translationDoFCount=this.dofFlags[g.X]+this.dofFlags[g.Y]+this.dofFlags[g.Z]}},{key:"setDoFValues",value:function(){this.setMatrixDoFNeedsUpdate();for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this._setValues(this.dofValues,e)}},{key:"setDoFValue",value:function(t,e){return this.setMatrixDoFNeedsUpdate(),this._setValue(this.dofValues,t,e)}},{key:"setDoFQuaternion",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this._setViaQuaternion(this.dofValues,e),this.setMatrixDoFNeedsUpdate()}},{key:"getDoFValue",value:function(t){return this.dofValues[t]}},{key:"getDoFQuaternion",value:function(t){this._getQuaternion(this.dofValues,t)}},{key:"getDoFEuler",value:function(t){this._getEuler(this.dofValues,t)}},{key:"getDoFPosition",value:function(t){this._getPosition(this.dofValues,t)}},{key:"setRestPoseValues",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this._setValues(this.dofRestPose,e)}},{key:"setRestPoseValue",value:function(t,e){return this._setValue(this.dofRestPose,t,e)}},{key:"getRestPoseValue",value:function(t){return this.dofRestPose[t]}},{key:"getRestPoseQuaternion",value:function(t){this._getQuaternion(this.dofRestPose,t)}},{key:"getRestPoseEuler",value:function(t){this._getEuler(this.dofRestPose,t)}},{key:"getRestPosePosition",value:function(t){this._getPosition(this.dofRestPose,t)}},{key:"setTargetValues",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this._setValues(this.dofTarget,e)}},{key:"setTargetValue",value:function(t,e){this._setValue(this.dofTarget,t,e)}},{key:"getTargetValue",value:function(t){return this.dofTarget[t]}},{key:"getTargetQuaternion",value:function(t){this._getQuaternion(this.dofTarget,t)}},{key:"getTargetEuler",value:function(t){this._getEuler(this.dofTarget,t)}},{key:"getTargetPosition",value:function(t){this._getPosition(this.dofTarget,t)}},{key:"setMinLimits",value:function(){for(var t=this.dof,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];for(var r in i){var n=t[r];this.setMinLimit(n,i[r])}}},{key:"setMinLimit",value:function(t,e){this.minDoFLimit[t]=e,this.setDoFValue(t,this.dofValues[t])}},{key:"getMinLimit",value:function(t){return this.minDoFLimit[t]}},{key:"setMaxLimits",value:function(){for(var t=this.dof,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];for(var r in i){var n=t[r];this.setMaxLimit(n,i[r])}}},{key:"setMaxLimit",value:function(t,e){this.maxDoFLimit[t]=e,this.setDoFValue(t,this.dofValues[t])}},{key:"getMaxLimit",value:function(t){return this.maxDoFLimit[t]}},{key:"getClosureError",value:function(t,e){if(!this.isClosure)throw new Error;this.updateMatrixWorld(),this.child.updateMatrixWorld(),(0,o.getMatrixDifference)(this.matrixWorld,this.child.matrixWorld,t,e)}},{key:"tryMinimizeEulerAngles",value:function(){var t=this.trackJointWrap,e=this.rotationDoFCount,o=this.dofRestPose,r=this.dofTarget,n=this.dofValues;if(!t)if(e<3)for(var a=g.EX;a<=g.EZ;a++)r[a]=(0,i.toSmallestEulerValueDistance)(n[a],r[a]),o[a]=(0,i.toSmallestEulerValueDistance)(n[a],o[a]);else w[0]=n[g.EX],w[1]=n[g.EY],w[2]=n[g.EZ],k[0]=r[g.EX],k[1]=r[g.EY],k[2]=r[g.EZ],(0,i.getClosestEulerRepresentation)(k,w,k),r[g.EX]=k[0],r[g.EY]=k[1],r[g.EZ]=k[2],k[0]=o[g.EX],k[1]=o[g.EY],k[2]=o[g.EZ],(0,i.getClosestEulerRepresentation)(k,w,k),o[g.EX]=k[0],o[g.EY]=k[1],o[g.EZ]=k[2]}},{key:"getDeltaWorldMatrix",value:function(e,i,o){var r=this.dofValues,n=this.minDoFLimit,a=this.maxDoFLimit,s=this.cachedIdentityDoFMatrixWorld;this.updateMatrixWorld(),_.set(r);var l=n[e],u=a[e],f=_[e],h=f-l,c=u-f,d=f+i,y=i>0&&d>u&&h>c||i<0&&d<l&&c>h;return y&&(d=f-i),_[e]=d,R(E,_),t.mat4.multiply(o,s,E),y}},{key:"setMatrixDoFNeedsUpdate",value:function(){!1===this.matrixDoFNeedsUpdate&&(this.matrixDoFNeedsUpdate=!0,this.setMatrixWorldNeedsUpdate())}},{key:"updateDoFMatrix",value:function(){this.matrixDoFNeedsUpdate&&(R(this.matrixDoF,this.dofValues),this.matrixDoFNeedsUpdate=!1)}},{key:"computeMatrixWorld",value:function(){var e=this.parent,i=this.matrixWorld,o=this.matrix,r=this.matrixDoF,n=this.cachedIdentityDoFMatrixWorld;this.updateDoFMatrix(),t.mat4.multiply(i,o,r),e?(t.mat4.multiply(i,e.matrixWorld,i),t.mat4.multiply(n,e.matrixWorld,o)):t.mat4.copy(n,o)}},{key:"makeClosure",value:function(t){if(!t.isLink||this.children.length>=1||t.parent===this)throw new Error;this.children[0]=t,this.child=t,this.isClosure=!0}},{key:"addChild",value:function(t){if(!t.isLink||this.children.length>=1||t.parent===this)throw new Error;u(v(f.prototype),"addChild",this).call(this,t),this.child=t,this.isClosure=!1}},{key:"removeChild",value:function(t){if(this.isClosure){if(this.child!==t)throw new Error;this.children.length=0,this.child=null,this.isClosure=!1}else u(v(f.prototype),"removeChild",this).call(this,t)}},{key:"attachChild",value:function(e){u(v(f.prototype),"attachChild",this).call(this,e),t.mat4.invert(D,this.matrixDoF),t.mat4.multiply(e.matrix,D,e.matrix),t.mat4.getTranslation(e.position,e.matrix),t.mat4.getRotation(e.quaternion,e.matrix)}},{key:"detachChild",value:function(e){u(v(f.prototype),"detachChild",this).call(this,e),t.mat4.invert(D,this.matrixDoF),t.mat4.multiply(e.matrix,D,e.matrix),t.mat4.getTranslation(e.position,e.matrix),t.mat4.getRotation(e.quaternion,e.matrix)}}]),f}();exports.Joint=P;
},{"gl-matrix":"CPlc","./Frame.js":"nSQ8","./utils/euler.js":"wWea","./utils/glmatrix.js":"Rg8q","./utils/constants.js":"PkL6"}],"rnLM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Link=void 0;var t=require("./Frame.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=u(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=s();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?p(t):r}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(e){i(u,t.Frame);var n=l(u);function u(){var t;return r(this,u),(t=n.call(this)).isLink=!0,t}return o(u,[{key:"addChild",value:function(t){if(!t.isJoint)throw new Error;c(y(u.prototype),"addChild",this).call(this,t)}}]),u}();exports.Link=b;
},{"./Frame.js":"nSQ8"}],"PjMN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Goal=void 0;var t=require("./Joint.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return i(t)||u(t)||o(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function u(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function i(t){if(Array.isArray(t))return c(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}function s(t,e,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=y(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){var e=d();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?O(t):r}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(e){p(o,t.Joint);var n=h(o);function o(){var t;f(this,o);for(var e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return(t=n.call.apply(n,[this].concat(r))).isGoal=!0,t.setFreeDoF(),t}return l(o,[{key:"setDoF",value:function(){for(var e,r=arguments.length,n=new Array(r),u=0;u<r;u++)n[u]=arguments[u];var i=Number(n.includes(t.DOF.EX))+Number(n.includes(t.DOF.EY))+Number(n.includes(t.DOF.EZ));if(0!==i&&3!==i)throw new Error;(e=s(m(o.prototype),"setDoF",this)).call.apply(e,[this].concat(n))}},{key:"setGoalDoF",value:function(){this.setDoF.apply(this,arguments)}},{key:"setFreeDoF",value:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var u=[t.DOF.X,t.DOF.Y,t.DOF.Z,t.DOF.EX,t.DOF.EY,t.DOF.EZ].filter(function(t){return!n.includes(t)});this.setDoF.apply(this,r(u))}},{key:"addChild",value:function(){throw new Error}}]),o}();exports.Goal=w;
},{"./Joint.js":"Ns4N"}],"SSkq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.serialize=u,exports.deserialize=c;var e=require("../core/Joint.js"),t=require("../core/Link.js"),r=require("../core/Goal.js");function n(e){return s(e)||a(e)||i(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function a(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function s(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){for(var t=new Map,r=[],n=0,o=e.length;n<o;n++){var i=e[n],a=i.name,s=i.dof,l=i.dofValues,u=i.dofTarget,c=i.dofRestPose,f=i.minDoFLimit,d=i.maxDoFLimit,p=i.targetSet,m=i.restPoseSet,y=i.position,g=i.quaternion,h=i.isClosure,v="Link";i.isGoal?v="Goal":i.isJoint&&(v="Joint");var S={dof:s?s.slice():null,dofValues:l?l.slice():null,dofTarget:u?u.slice():null,dofRestPose:c?c.slice():null,minDoFLimit:f?f.slice():null,maxDoFLimit:d?d.slice():null,targetSet:p,restPoseSet:m,isClosure:h,name:a,position:y.slice(),quaternion:g.slice(),children:null,type:v};r.push(S),t.set(i,n)}for(var b=0,L=e.length;b<L;b++){var D=r[b],F=e[b];D.children=F.children.map(function(e){return t.get(e)}),F.parent?D.parent=t.get(F.parent):D.parent=null}return r}function c(o){for(var i=o.map(function(o){var i,a,s=o.type,l=o.name,u=o.position,c=o.quaternion,f=o.dof,d=o.dofValues,p=o.dofTarget,m=o.dofRestPose,y=o.minDoFLimit,g=o.maxDoFLimit,h=o.targetSet,v=o.restPoseSet,S=o.isClosure;switch(s){case"Goal":case"Joint":(i=a="Goal"===s?new r.Goal:new e.Joint).setDoF.apply(i,n(f)),a.dofValues.set(d),a.dofTarget.set(p),a.dofRestPose.set(m),a.minDoFLimit.set(y),a.maxDoFLimit.set(g),a.targetSet=h,a.restPoseSet=v,a.isClosure=S;break;case"Link":a=new t.Link}return a.name=l,a.position.set(u),a.quaternion.set(c),a}),a=0;a<i.length;a++){var s,l=i[a],u=o[a];l.parent=i[u.parent]||null,(s=l.children).push.apply(s,n(u.children.map(function(e){return i[e]}))),l.setMatrixNeedsUpdate(),l.isJoint&&(l.child=l.children[0]||null,l.setMatrixDoFNeedsUpdate())}return i}
},{"../core/Joint.js":"Ns4N","../core/Link.js":"rnLM","../core/Goal.js":"PjMN"}],"oRpC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateSharedBuffer=r,exports.applyToBuffer=t,exports.applyFromBuffer=i,exports.copyFrameToBuffer=n,exports.copyBufferToFrame=a,exports.LINK_STRIDE=exports.JOINT_STRIDE=void 0;var e=304;exports.JOINT_STRIDE=e;var o=56;function r(o){var r=new SharedArrayBuffer(e*o.length);return t(o,new Float32Array(r),new Uint8Array(r)),r}function t(o,r,t){for(var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=0,s=o.length;f<s;f++)n(o[f],r,t,f*e,i,a)}function i(o,r,t){for(var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=0,s=o.length;f<s;f++)a(o[f],r,t,e*f,i,n)}function n(e,o,r,t){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=t/4;if(!(arguments.length>5&&void 0!==arguments[5])||arguments[5]){for(var a=e.position,f=e.quaternion,s=0;s<3;s++)o[n+0+s]=a[s];for(var v=0;v<4;v++)o[n+3+v]=f[v];if(e.isJoint){for(var d=e.dofTarget,u=e.dofRestPose,l=e.minDoFLimit,p=e.maxDoFLimit,g=e.targetSet,h=e.restPoseSet,m=0;m<6;m++)o[n+7+0+m]=d[m],o[n+7+6+m]=u[m],o[n+7+12+m]=l[m],o[n+7+18+m]=p[m];r[t+148]=Number(g),r[t+149]=Number(h)}}if(i&&e.isJoint)for(var x=e.dofValues,T=0;T<6;T++)o[n+7+24+T]=x[T]}function a(e,o,r,t){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=t/4;if((!(arguments.length>5&&void 0!==arguments[5])||arguments[5])&&(e.setPosition(o[n+0],o[n+1],o[n+2]),e.setQuaternion(o[n+3+0],o[n+3+1],o[n+3+2],o[n+3+3]),e.isJoint)){for(var a=e.dofTarget,f=e.dofRestPose,s=e.minDoFLimit,v=e.maxDoFLimit,d=0;d<6;d++)a[d]=o[n+7+0+d],f[d]=o[n+7+6+d],s[d]=o[n+7+12+d],v[d]=o[n+7+18+d];e.targetSet=Boolean(r[t+148]),e.restPoseSet=Boolean(r[t+149])}if(i&&e.isJoint){for(var u=e.dofValues,l=!1,p=0;p<6;p++){var g=o[n+7+24+p];g!==u[p]&&(u[p]=g,l=!0)}l&&e.setMatrixDoFNeedsUpdate()}}exports.LINK_STRIDE=o;
},{}],"L8yv":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],r=require("../core/Solver.js"),a=require("../core/ChainSolver.js"),t=require("./serialize.js"),u=require("./utils.js"),l=new r.Solver,s=-1,i=null,n=null,o=null,c=null;function S(){(0,u.applyFromBuffer)(i,o,c,!1,!0);var e=l.solve();(0,u.applyToBuffer)(i,o,c,!0,!1),s=e===a.SOLVE_STATUS.TIMEOUT?setTimeout(S):-1,this.postMessage({type:"updateSolve",data:e})}e.onmessage=function(e){var r=e.data,a=r.type,u=r.data;switch(a){case"updateStructure":i=(0,t.deserialize)(u.serialized),l.roots=i.filter(function(e){return null===e.parent}),l.updateStructure(),n=u.buffer,c=new Uint8Array(n),o=new Float32Array(n);break;case"updateSolverSettings":Object.assign(l,u);break;case"startSolve":-1===s&&S();break;case"endSolve":-1!==s&&(clearTimeout(s),s=-1)}};
},{"../core/Solver.js":"a3Ki","../core/ChainSolver.js":"rw8i","./serialize.js":"SSkq","./utils.js":"oRpC"}]},{},["L8yv"], null)
//# sourceMappingURL=workerSolver.worker.316d40ac.js.map